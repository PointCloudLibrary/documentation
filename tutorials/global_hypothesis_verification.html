<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tutorial: Hypothesis Verification for 3D Object Recognition &mdash; Point Cloud Library 1.14.1-dev documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Point Cloud Library
          </a>
              <div class="version">
                1.14.1-dev
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Tutorial: Hypothesis Verification for 3D Object Recognition</a></li>
<li><a class="reference internal" href="#suggested-readings-and-prerequisites">Suggested readings and prerequisites</a></li>
<li><a class="reference internal" href="#the-code">The Code</a></li>
<li><a class="reference internal" href="#walkthrough">Walkthrough</a><ul>
<li><a class="reference internal" href="#input-parameters">Input Parameters</a></li>
<li><a class="reference internal" href="#helpers">Helpers</a></li>
<li><a class="reference internal" href="#clustering">Clustering</a></li>
<li><a class="reference internal" href="#model-in-scene-projection">Model-in-Scene Projection</a></li>
<li><a class="reference internal" href="#hypotheses-verification">Hypotheses Verification</a></li>
<li><a class="reference internal" href="#visualization">Visualization</a></li>
</ul>
</li>
<li><a class="reference internal" href="#compiling-and-running-the-program">Compiling and running the program</a></li>
</ul>
</div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Point Cloud Library</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Tutorial: Hypothesis Verification for 3D Object Recognition</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="tutorial-hypothesis-verification-for-3d-object-recognition">
<span id="global-hypothesis-verification"></span><h1>Tutorial: Hypothesis Verification for 3D Object Recognition</h1>
<p>This tutorial aims at explaining how to do 3D object recognition in clutter by verifying model hypotheses
in cluttered and heavily occluded 3D scenes. After descriptor matching, the tutorial runs one of the
Correspondence Grouping algorithms available in PCL in order to cluster the set of point-to-point
correspondences, determining instances of object hypotheses in the scene. On these hypotheses,
the Global Hypothesis Verification algorithm is applied in order to
decrease the amount of false positives.</p>
</section>
<section id="suggested-readings-and-prerequisites">
<h1>Suggested readings and prerequisites</h1>
<p>This tutorial is the follow-up of a previous tutorial on object recognition: <a class="reference internal" href="correspondence_grouping.html#correspondence-grouping"><span class="std std-ref">3D Object Recognition based on Correspondence Grouping</span></a>
To understand this tutorial, we suggest first to read and understand that tutorial.</p>
<p>More details on the Global Hypothesis Verification method can be found here:
A. Aldoma, F. Tombari, L. Di Stefano, M. Vincze, <cite>A global hypothesis verification method for 3D object recognition</cite>, ECCV 2012</p>
<p>For more information on 3D Object Recognition in Clutter and on the standard feature-based recognition pipeline, we suggest this tutorial paper:
A. Aldoma, Z.C. Marton, F. Tombari, W. Wohlkinger, C. Potthast, B. Zeisl, R.B. Rusu, S. Gedikli, M. Vincze, “Point Cloud Library: Three-Dimensional Object Recognition and 6 DOF Pose Estimation”, IEEE Robotics and Automation Magazine, 2012</p>
</section>
<section id="the-code">
<h1>The Code</h1>
<p>Before starting, you should download from the GitHub folder: <a class="reference external" href="https://github.com/PointCloudLibrary/data/tree/master/tutorials/correspondence_grouping">Correspondence Grouping</a> the example PCD clouds
used in this tutorial (milk.pcd and milk_cartoon_all_small_clorox.pcd), and place the files in the source older.</p>
<p>Then copy and paste the following code into your editor and save it as <code class="docutils literal notranslate"><span class="pre">global_hypothesis_verification.cpp</span></code>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="linenos">  1</span><span class="cm">/*</span>
<span class="linenos">  2</span><span class="cm"> * Software License Agreement (BSD License)</span>
<span class="linenos">  3</span><span class="cm"> *</span>
<span class="linenos">  4</span><span class="cm"> *  Point Cloud Library (PCL) - www.pointclouds.org</span>
<span class="linenos">  5</span><span class="cm"> *  Copyright (c) 2014-, Open Perception, Inc.</span>
<span class="linenos">  6</span><span class="cm"> *</span>
<span class="linenos">  7</span><span class="cm"> *  All rights reserved.</span>
<span class="linenos">  8</span><span class="cm"> *</span>
<span class="linenos">  9</span><span class="cm"> *  Redistribution and use in source and binary forms, with or without</span>
<span class="linenos"> 10</span><span class="cm"> *  modification, are permitted provided that the following conditions</span>
<span class="linenos"> 11</span><span class="cm"> *  are met:</span>
<span class="linenos"> 12</span><span class="cm"> *</span>
<span class="linenos"> 13</span><span class="cm"> *   * Redistributions of source code must retain the above copyright</span>
<span class="linenos"> 14</span><span class="cm"> *     notice, this list of conditions and the following disclaimer.</span>
<span class="linenos"> 15</span><span class="cm"> *   * Redistributions in binary form must reproduce the above</span>
<span class="linenos"> 16</span><span class="cm"> *     copyright notice, this list of conditions and the following</span>
<span class="linenos"> 17</span><span class="cm"> *     disclaimer in the documentation and/or other materials provided</span>
<span class="linenos"> 18</span><span class="cm"> *     with the distribution.</span>
<span class="linenos"> 19</span><span class="cm"> *   * Neither the name of the copyright holder(s) nor the names of its</span>
<span class="linenos"> 20</span><span class="cm"> *     contributors may be used to endorse or promote products derived</span>
<span class="linenos"> 21</span><span class="cm"> *     from this software without specific prior written permission.</span>
<span class="linenos"> 22</span><span class="cm"> *</span>
<span class="linenos"> 23</span><span class="cm"> *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span>
<span class="linenos"> 24</span><span class="cm"> *  &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span>
<span class="linenos"> 25</span><span class="cm"> *  LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS</span>
<span class="linenos"> 26</span><span class="cm"> *  FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE</span>
<span class="linenos"> 27</span><span class="cm"> *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,</span>
<span class="linenos"> 28</span><span class="cm"> *  INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,</span>
<span class="linenos"> 29</span><span class="cm"> *  BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;</span>
<span class="linenos"> 30</span><span class="cm"> *  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER</span>
<span class="linenos"> 31</span><span class="cm"> *  CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT</span>
<span class="linenos"> 32</span><span class="cm"> *  LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN</span>
<span class="linenos"> 33</span><span class="cm"> *  ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE</span>
<span class="linenos"> 34</span><span class="cm"> *  POSSIBILITY OF SUCH DAMAGE.</span>
<span class="linenos"> 35</span><span class="cm"> *</span>
<span class="linenos"> 36</span><span class="cm"> */</span><span class="w"></span>
<span class="linenos"> 37</span>
<span class="linenos"> 38</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;pcl/io/pcd_io.h&gt;</span><span class="cp"></span>
<span class="linenos"> 39</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;pcl/point_cloud.h&gt;</span><span class="cp"></span>
<span class="linenos"> 40</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;pcl/correspondence.h&gt;</span><span class="cp"></span>
<span class="linenos"> 41</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;pcl/features/normal_3d_omp.h&gt;</span><span class="cp"></span>
<span class="linenos"> 42</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;pcl/features/shot_omp.h&gt;</span><span class="cp"></span>
<span class="linenos"> 43</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;pcl/features/board.h&gt;</span><span class="cp"></span>
<span class="linenos"> 44</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;pcl/filters/uniform_sampling.h&gt;</span><span class="cp"></span>
<span class="linenos"> 45</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;pcl/recognition/cg/hough_3d.h&gt;</span><span class="cp"></span>
<span class="linenos"> 46</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;pcl/recognition/cg/geometric_consistency.h&gt;</span><span class="cp"></span>
<span class="linenos"> 47</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;pcl/recognition/hv/hv_go.h&gt;</span><span class="cp"></span>
<span class="linenos"> 48</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;pcl/registration/icp.h&gt;</span><span class="cp"></span>
<span class="linenos"> 49</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;pcl/visualization/pcl_visualizer.h&gt;</span><span class="cp"></span>
<span class="linenos"> 50</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;pcl/kdtree/kdtree_flann.h&gt;</span><span class="cp"></span>
<span class="linenos"> 51</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;pcl/kdtree/impl/kdtree_flann.hpp&gt;</span><span class="cp"></span>
<span class="linenos"> 52</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;pcl/common/transforms.h&gt;</span><span class="c1"> </span><span class="cp"></span>
<span class="linenos"> 53</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;pcl/console/parse.h&gt;</span><span class="cp"></span>
<span class="linenos"> 54</span>
<span class="linenos"> 55</span><span class="k">typedef</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZRGBA</span><span class="w"> </span><span class="n">PointType</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 56</span><span class="k">typedef</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">Normal</span><span class="w"> </span><span class="n">NormalType</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 57</span><span class="k">typedef</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">ReferenceFrame</span><span class="w"> </span><span class="n">RFType</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 58</span><span class="k">typedef</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">SHOT352</span><span class="w"> </span><span class="n">DescriptorType</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 59</span>
<span class="linenos"> 60</span><span class="k">struct</span><span class="w"> </span><span class="nc">CloudStyle</span><span class="w"></span>
<span class="linenos"> 61</span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 62</span><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">r</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 63</span><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">g</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 64</span><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 65</span><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">size</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 66</span>
<span class="linenos"> 67</span><span class="w">    </span><span class="n">CloudStyle</span><span class="w"> </span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">r</span><span class="p">,</span><span class="w"></span>
<span class="linenos"> 68</span><span class="w">                </span><span class="kt">double</span><span class="w"> </span><span class="n">g</span><span class="p">,</span><span class="w"></span>
<span class="linenos"> 69</span><span class="w">                </span><span class="kt">double</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"></span>
<span class="linenos"> 70</span><span class="w">                </span><span class="kt">double</span><span class="w"> </span><span class="n">size</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"></span>
<span class="linenos"> 71</span><span class="w">        </span><span class="n">r</span><span class="w"> </span><span class="p">(</span><span class="n">r</span><span class="p">),</span><span class="w"></span>
<span class="linenos"> 72</span><span class="w">        </span><span class="n">g</span><span class="w"> </span><span class="p">(</span><span class="n">g</span><span class="p">),</span><span class="w"></span>
<span class="linenos"> 73</span><span class="w">        </span><span class="n">b</span><span class="w"> </span><span class="p">(</span><span class="n">b</span><span class="p">),</span><span class="w"></span>
<span class="linenos"> 74</span><span class="w">        </span><span class="n">size</span><span class="w"> </span><span class="p">(</span><span class="n">size</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 75</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 76</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 77</span><span class="p">};</span><span class="w"></span>
<span class="linenos"> 78</span>
<span class="linenos"> 79</span><span class="n">CloudStyle</span><span class="w"> </span><span class="nf">style_white</span><span class="w"> </span><span class="p">(</span><span class="mf">255.0</span><span class="p">,</span><span class="w"> </span><span class="mf">255.0</span><span class="p">,</span><span class="w"> </span><span class="mf">255.0</span><span class="p">,</span><span class="w"> </span><span class="mf">4.0</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 80</span><span class="n">CloudStyle</span><span class="w"> </span><span class="nf">style_red</span><span class="w"> </span><span class="p">(</span><span class="mf">255.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">3.0</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 81</span><span class="n">CloudStyle</span><span class="w"> </span><span class="nf">style_green</span><span class="w"> </span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">255.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">5.0</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 82</span><span class="n">CloudStyle</span><span class="w"> </span><span class="nf">style_cyan</span><span class="w"> </span><span class="p">(</span><span class="mf">93.0</span><span class="p">,</span><span class="w"> </span><span class="mf">200.0</span><span class="p">,</span><span class="w"> </span><span class="mf">217.0</span><span class="p">,</span><span class="w"> </span><span class="mf">4.0</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 83</span><span class="n">CloudStyle</span><span class="w"> </span><span class="nf">style_violet</span><span class="w"> </span><span class="p">(</span><span class="mf">255.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">255.0</span><span class="p">,</span><span class="w"> </span><span class="mf">8.0</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 84</span>
<span class="linenos"> 85</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">model_filename_</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 86</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">scene_filename_</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 87</span>
<span class="linenos"> 88</span><span class="c1">//Algorithm params </span>
<span class="linenos"> 89</span><span class="kt">bool</span><span class="w"> </span><span class="nf">show_keypoints_</span><span class="w"> </span><span class="p">(</span><span class="nb">false</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 90</span><span class="kt">bool</span><span class="w"> </span><span class="nf">use_hough_</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 91</span><span class="kt">float</span><span class="w"> </span><span class="nf">model_ss_</span><span class="w"> </span><span class="p">(</span><span class="mf">0.02f</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 92</span><span class="kt">float</span><span class="w"> </span><span class="nf">scene_ss_</span><span class="w"> </span><span class="p">(</span><span class="mf">0.02f</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 93</span><span class="kt">float</span><span class="w"> </span><span class="nf">rf_rad_</span><span class="w"> </span><span class="p">(</span><span class="mf">0.015f</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 94</span><span class="kt">float</span><span class="w"> </span><span class="nf">descr_rad_</span><span class="w"> </span><span class="p">(</span><span class="mf">0.02f</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 95</span><span class="kt">float</span><span class="w"> </span><span class="nf">cg_size_</span><span class="w"> </span><span class="p">(</span><span class="mf">0.01f</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 96</span><span class="kt">float</span><span class="w"> </span><span class="nf">cg_thresh_</span><span class="w"> </span><span class="p">(</span><span class="mf">5.0f</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 97</span><span class="kt">int</span><span class="w"> </span><span class="nf">icp_max_iter_</span><span class="w"> </span><span class="p">(</span><span class="mi">5</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 98</span><span class="kt">float</span><span class="w"> </span><span class="nf">icp_corr_distance_</span><span class="w"> </span><span class="p">(</span><span class="mf">0.005f</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 99</span><span class="kt">float</span><span class="w"> </span><span class="nf">hv_resolution_</span><span class="w"> </span><span class="p">(</span><span class="mf">0.005f</span><span class="p">);</span><span class="w"></span>
<span class="linenos">100</span><span class="kt">float</span><span class="w"> </span><span class="nf">hv_occupancy_grid_resolution_</span><span class="w"> </span><span class="p">(</span><span class="mf">0.01f</span><span class="p">);</span><span class="w"></span>
<span class="linenos">101</span><span class="kt">float</span><span class="w"> </span><span class="nf">hv_clutter_reg_</span><span class="w"> </span><span class="p">(</span><span class="mf">5.0f</span><span class="p">);</span><span class="w"></span>
<span class="linenos">102</span><span class="kt">float</span><span class="w"> </span><span class="nf">hv_inlier_th_</span><span class="w"> </span><span class="p">(</span><span class="mf">0.005f</span><span class="p">);</span><span class="w"></span>
<span class="linenos">103</span><span class="kt">float</span><span class="w"> </span><span class="nf">hv_occlusion_th_</span><span class="w"> </span><span class="p">(</span><span class="mf">0.01f</span><span class="p">);</span><span class="w"></span>
<span class="linenos">104</span><span class="kt">float</span><span class="w"> </span><span class="nf">hv_rad_clutter_</span><span class="w"> </span><span class="p">(</span><span class="mf">0.03f</span><span class="p">);</span><span class="w"></span>
<span class="linenos">105</span><span class="kt">float</span><span class="w"> </span><span class="nf">hv_regularizer_</span><span class="w"> </span><span class="p">(</span><span class="mf">3.0f</span><span class="p">);</span><span class="w"></span>
<span class="linenos">106</span><span class="kt">float</span><span class="w"> </span><span class="nf">hv_rad_normals_</span><span class="w"> </span><span class="p">(</span><span class="mf">0.05</span><span class="p">);</span><span class="w"></span>
<span class="linenos">107</span><span class="kt">bool</span><span class="w"> </span><span class="nf">hv_detect_clutter_</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">);</span><span class="w"></span>
<span class="linenos">108</span>
<span class="linenos">109</span><span class="cm">/**</span>
<span class="linenos">110</span><span class="cm"> * Prints out Help message</span>
<span class="linenos">111</span><span class="cm"> * @param filename Runnable App Name</span>
<span class="linenos">112</span><span class="cm"> */</span><span class="w"></span>
<span class="linenos">113</span><span class="kt">void</span><span class="w"></span>
<span class="linenos">114</span><span class="nf">showHelp</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">filename</span><span class="p">)</span><span class="w"></span>
<span class="linenos">115</span><span class="p">{</span><span class="w"></span>
<span class="linenos">116</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">117</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;***************************************************************************&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">118</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;*                                                                         *&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">119</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;*          Global Hypothese Verification Tutorial - Usage Guide          *&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">120</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;*                                                                         *&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">121</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;***************************************************************************&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">122</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Usage: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">filename</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot; model_filename.pcd scene_filename.pcd [Options]&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">123</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Options:&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">124</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;     -h:                          Show this help.&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">125</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;     -k:                          Show keypoints.&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">126</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;     --algorithm (Hough|GC):      Clustering algorithm used (default Hough).&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">127</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;     --model_ss val:              Model uniform sampling radius (default &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">model_ss_</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;)&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">128</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;     --scene_ss val:              Scene uniform sampling radius (default &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">scene_ss_</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;)&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">129</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;     --rf_rad val:                Reference frame radius (default &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">rf_rad_</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;)&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">130</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;     --descr_rad val:             Descriptor radius (default &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">descr_rad_</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;)&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">131</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;     --cg_size val:               Cluster size (default &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">cg_size_</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;)&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">132</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;     --cg_thresh val:             Clustering threshold (default &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">cg_thresh_</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;)&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">133</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;     --icp_max_iter val:          ICP max iterations number (default &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">icp_max_iter_</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;)&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">134</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;     --icp_corr_distance val:     ICP correspondence distance (default &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">icp_corr_distance_</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;)&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">135</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;     --hv_clutter_reg val:        Clutter Regularizer (default &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">hv_clutter_reg_</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;)&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">136</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;     --hv_inlier_th val:          Inlier threshold (default &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">hv_inlier_th_</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;)&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">137</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;     --hv_occlusion_th val:       Occlusion threshold (default &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">hv_occlusion_th_</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;)&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">138</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;     --hv_rad_clutter val:        Clutter radius (default &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">hv_rad_clutter_</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;)&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">139</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;     --hv_regularizer val:        Regularizer value (default &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">hv_regularizer_</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;)&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">140</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;     --hv_rad_normals val:        Normals radius (default &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">hv_rad_normals_</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;)&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">141</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;     --hv_detect_clutter val:     TRUE if clutter detect enabled (default &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">hv_detect_clutter_</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;)&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">142</span><span class="p">}</span><span class="w"></span>
<span class="linenos">143</span>
<span class="linenos">144</span><span class="cm">/**</span>
<span class="linenos">145</span><span class="cm"> * Parses Command Line Arguments (Argc,Argv)</span>
<span class="linenos">146</span><span class="cm"> * @param argc</span>
<span class="linenos">147</span><span class="cm"> * @param argv</span>
<span class="linenos">148</span><span class="cm"> */</span><span class="w"></span>
<span class="linenos">149</span><span class="kt">void</span><span class="w"></span>
<span class="linenos">150</span><span class="nf">parseCommandLine</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"></span>
<span class="linenos">151</span><span class="w">                  </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span><span class="w"></span>
<span class="linenos">152</span><span class="p">{</span><span class="w"></span>
<span class="linenos">153</span><span class="w">  </span><span class="c1">//Show help</span>
<span class="linenos">154</span><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">console</span><span class="o">::</span><span class="n">find_switch</span><span class="w"> </span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;-h&quot;</span><span class="p">))</span><span class="w"></span>
<span class="linenos">155</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">156</span><span class="w">    </span><span class="n">showHelp</span><span class="w"> </span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span><span class="w"></span>
<span class="linenos">157</span><span class="w">    </span><span class="n">exit</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="linenos">158</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">159</span>
<span class="linenos">160</span><span class="w">  </span><span class="c1">//Model &amp; scene filenames</span>
<span class="linenos">161</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">filenames</span><span class="p">;</span><span class="w"></span>
<span class="linenos">162</span><span class="w">  </span><span class="n">filenames</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">console</span><span class="o">::</span><span class="n">parse_file_extension_argument</span><span class="w"> </span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;.pcd&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">163</span><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">filenames</span><span class="p">.</span><span class="n">size</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"></span>
<span class="linenos">164</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">165</span><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Filenames missing.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"></span>
<span class="linenos">166</span><span class="w">    </span><span class="n">showHelp</span><span class="w"> </span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span><span class="w"></span>
<span class="linenos">167</span><span class="w">    </span><span class="n">exit</span><span class="w"> </span><span class="p">(</span><span class="mi">-1</span><span class="p">);</span><span class="w"></span>
<span class="linenos">168</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">169</span>
<span class="linenos">170</span><span class="w">  </span><span class="n">model_filename_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">argv</span><span class="p">[</span><span class="n">filenames</span><span class="p">[</span><span class="mi">0</span><span class="p">]];</span><span class="w"></span>
<span class="linenos">171</span><span class="w">  </span><span class="n">scene_filename_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">argv</span><span class="p">[</span><span class="n">filenames</span><span class="p">[</span><span class="mi">1</span><span class="p">]];</span><span class="w"></span>
<span class="linenos">172</span>
<span class="linenos">173</span><span class="w">  </span><span class="c1">//Program behavior</span>
<span class="linenos">174</span><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">console</span><span class="o">::</span><span class="n">find_switch</span><span class="w"> </span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;-k&quot;</span><span class="p">))</span><span class="w"></span>
<span class="linenos">175</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">176</span><span class="w">    </span><span class="n">show_keypoints_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"></span>
<span class="linenos">177</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">178</span>
<span class="linenos">179</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">used_algorithm</span><span class="p">;</span><span class="w"></span>
<span class="linenos">180</span><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">console</span><span class="o">::</span><span class="n">parse_argument</span><span class="w"> </span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;--algorithm&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">used_algorithm</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">-1</span><span class="p">)</span><span class="w"></span>
<span class="linenos">181</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">182</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">used_algorithm</span><span class="p">.</span><span class="n">compare</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;Hough&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"></span>
<span class="linenos">183</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">184</span><span class="w">      </span><span class="n">use_hough_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"></span>
<span class="linenos">185</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">186</span><span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">used_algorithm</span><span class="p">.</span><span class="n">compare</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;GC&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"></span>
<span class="linenos">187</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">188</span><span class="w">      </span><span class="n">use_hough_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"></span>
<span class="linenos">189</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">190</span><span class="w">    </span><span class="k">else</span><span class="w"></span>
<span class="linenos">191</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">192</span><span class="w">      </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Wrong algorithm name.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"></span>
<span class="linenos">193</span><span class="w">      </span><span class="n">showHelp</span><span class="w"> </span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span><span class="w"></span>
<span class="linenos">194</span><span class="w">      </span><span class="n">exit</span><span class="w"> </span><span class="p">(</span><span class="mi">-1</span><span class="p">);</span><span class="w"></span>
<span class="linenos">195</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">196</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">197</span>
<span class="linenos">198</span><span class="w">  </span><span class="c1">//General parameters</span>
<span class="linenos">199</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">console</span><span class="o">::</span><span class="n">parse_argument</span><span class="w"> </span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;--model_ss&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">model_ss_</span><span class="p">);</span><span class="w"></span>
<span class="linenos">200</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">console</span><span class="o">::</span><span class="n">parse_argument</span><span class="w"> </span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;--scene_ss&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">scene_ss_</span><span class="p">);</span><span class="w"></span>
<span class="linenos">201</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">console</span><span class="o">::</span><span class="n">parse_argument</span><span class="w"> </span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;--rf_rad&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">rf_rad_</span><span class="p">);</span><span class="w"></span>
<span class="linenos">202</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">console</span><span class="o">::</span><span class="n">parse_argument</span><span class="w"> </span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;--descr_rad&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">descr_rad_</span><span class="p">);</span><span class="w"></span>
<span class="linenos">203</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">console</span><span class="o">::</span><span class="n">parse_argument</span><span class="w"> </span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;--cg_size&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">cg_size_</span><span class="p">);</span><span class="w"></span>
<span class="linenos">204</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">console</span><span class="o">::</span><span class="n">parse_argument</span><span class="w"> </span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;--cg_thresh&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">cg_thresh_</span><span class="p">);</span><span class="w"></span>
<span class="linenos">205</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">console</span><span class="o">::</span><span class="n">parse_argument</span><span class="w"> </span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;--icp_max_iter&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">icp_max_iter_</span><span class="p">);</span><span class="w"></span>
<span class="linenos">206</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">console</span><span class="o">::</span><span class="n">parse_argument</span><span class="w"> </span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;--icp_corr_distance&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">icp_corr_distance_</span><span class="p">);</span><span class="w"></span>
<span class="linenos">207</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">console</span><span class="o">::</span><span class="n">parse_argument</span><span class="w"> </span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;--hv_clutter_reg&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">hv_clutter_reg_</span><span class="p">);</span><span class="w"></span>
<span class="linenos">208</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">console</span><span class="o">::</span><span class="n">parse_argument</span><span class="w"> </span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;--hv_inlier_th&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">hv_inlier_th_</span><span class="p">);</span><span class="w"></span>
<span class="linenos">209</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">console</span><span class="o">::</span><span class="n">parse_argument</span><span class="w"> </span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;--hv_occlusion_th&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">hv_occlusion_th_</span><span class="p">);</span><span class="w"></span>
<span class="linenos">210</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">console</span><span class="o">::</span><span class="n">parse_argument</span><span class="w"> </span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;--hv_rad_clutter&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">hv_rad_clutter_</span><span class="p">);</span><span class="w"></span>
<span class="linenos">211</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">console</span><span class="o">::</span><span class="n">parse_argument</span><span class="w"> </span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;--hv_regularizer&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">hv_regularizer_</span><span class="p">);</span><span class="w"></span>
<span class="linenos">212</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">console</span><span class="o">::</span><span class="n">parse_argument</span><span class="w"> </span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;--hv_rad_normals&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">hv_rad_normals_</span><span class="p">);</span><span class="w"></span>
<span class="linenos">213</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">console</span><span class="o">::</span><span class="n">parse_argument</span><span class="w"> </span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;--hv_detect_clutter&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">hv_detect_clutter_</span><span class="p">);</span><span class="w"></span>
<span class="linenos">214</span><span class="p">}</span><span class="w"></span>
<span class="linenos">215</span>
<span class="linenos">216</span><span class="kt">int</span><span class="w"></span>
<span class="linenos">217</span><span class="nf">main</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"></span>
<span class="linenos">218</span><span class="w">      </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span><span class="w"></span>
<span class="linenos">219</span><span class="p">{</span><span class="w"></span>
<span class="linenos">220</span><span class="w">  </span><span class="n">parseCommandLine</span><span class="w"> </span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">);</span><span class="w"></span>
<span class="linenos">221</span>
<span class="linenos">222</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="linenos">223</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">model_keypoints</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="linenos">224</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">scene</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="linenos">225</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">scene_keypoints</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="linenos">226</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">NormalType</span><span class="o">&gt;::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">model_normals</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">NormalType</span><span class="o">&gt;</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="linenos">227</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">NormalType</span><span class="o">&gt;::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">scene_normals</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">NormalType</span><span class="o">&gt;</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="linenos">228</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">DescriptorType</span><span class="o">&gt;::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">model_descriptors</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">DescriptorType</span><span class="o">&gt;</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="linenos">229</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">DescriptorType</span><span class="o">&gt;::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">scene_descriptors</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">DescriptorType</span><span class="o">&gt;</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="linenos">230</span>
<span class="linenos">231</span><span class="w">  </span><span class="cm">/**</span>
<span class="linenos">232</span><span class="cm">   * Load Clouds</span>
<span class="linenos">233</span><span class="cm">   */</span><span class="w"></span>
<span class="linenos">234</span><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">io</span><span class="o">::</span><span class="n">loadPCDFile</span><span class="w"> </span><span class="p">(</span><span class="n">model_filename_</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">model</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"></span>
<span class="linenos">235</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">236</span><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Error loading model cloud.&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">237</span><span class="w">    </span><span class="n">showHelp</span><span class="w"> </span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span><span class="w"></span>
<span class="linenos">238</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="mi">-1</span><span class="p">);</span><span class="w"></span>
<span class="linenos">239</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">240</span><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">io</span><span class="o">::</span><span class="n">loadPCDFile</span><span class="w"> </span><span class="p">(</span><span class="n">scene_filename_</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">scene</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"></span>
<span class="linenos">241</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">242</span><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Error loading scene cloud.&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">243</span><span class="w">    </span><span class="n">showHelp</span><span class="w"> </span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span><span class="w"></span>
<span class="linenos">244</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="mi">-1</span><span class="p">);</span><span class="w"></span>
<span class="linenos">245</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">246</span>
<span class="linenos">247</span><span class="w">  </span><span class="cm">/**</span>
<span class="linenos">248</span><span class="cm">   * Compute Normals</span>
<span class="linenos">249</span><span class="cm">   */</span><span class="w"></span>
<span class="linenos">250</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">NormalEstimationOMP</span><span class="o">&lt;</span><span class="n">PointType</span><span class="p">,</span><span class="w"> </span><span class="n">NormalType</span><span class="o">&gt;</span><span class="w"> </span><span class="n">norm_est</span><span class="p">;</span><span class="w"></span>
<span class="linenos">251</span><span class="w">  </span><span class="n">norm_est</span><span class="p">.</span><span class="n">setKSearch</span><span class="w"> </span><span class="p">(</span><span class="mi">10</span><span class="p">);</span><span class="w"></span>
<span class="linenos">252</span><span class="w">  </span><span class="n">norm_est</span><span class="p">.</span><span class="n">setInputCloud</span><span class="w"> </span><span class="p">(</span><span class="n">model</span><span class="p">);</span><span class="w"></span>
<span class="linenos">253</span><span class="w">  </span><span class="n">norm_est</span><span class="p">.</span><span class="n">compute</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">model_normals</span><span class="p">);</span><span class="w"></span>
<span class="linenos">254</span>
<span class="linenos">255</span><span class="w">  </span><span class="n">norm_est</span><span class="p">.</span><span class="n">setInputCloud</span><span class="w"> </span><span class="p">(</span><span class="n">scene</span><span class="p">);</span><span class="w"></span>
<span class="linenos">256</span><span class="w">  </span><span class="n">norm_est</span><span class="p">.</span><span class="n">compute</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">scene_normals</span><span class="p">);</span><span class="w"></span>
<span class="linenos">257</span>
<span class="linenos">258</span><span class="w">  </span><span class="cm">/**</span>
<span class="linenos">259</span><span class="cm">   *  Downsample Clouds to Extract keypoints</span>
<span class="linenos">260</span><span class="cm">   */</span><span class="w"></span>
<span class="linenos">261</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">UniformSampling</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;</span><span class="w"> </span><span class="n">uniform_sampling</span><span class="p">;</span><span class="w"></span>
<span class="linenos">262</span><span class="w">  </span><span class="n">uniform_sampling</span><span class="p">.</span><span class="n">setInputCloud</span><span class="w"> </span><span class="p">(</span><span class="n">model</span><span class="p">);</span><span class="w"></span>
<span class="linenos">263</span><span class="w">  </span><span class="n">uniform_sampling</span><span class="p">.</span><span class="n">setRadiusSearch</span><span class="w"> </span><span class="p">(</span><span class="n">model_ss_</span><span class="p">);</span><span class="w"></span>
<span class="linenos">264</span><span class="w">  </span><span class="n">uniform_sampling</span><span class="p">.</span><span class="n">filter</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">model_keypoints</span><span class="p">);</span><span class="w"></span>
<span class="linenos">265</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Model total points: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">model</span><span class="o">-&gt;</span><span class="n">size</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;; Selected Keypoints: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">model_keypoints</span><span class="o">-&gt;</span><span class="n">size</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">266</span>
<span class="linenos">267</span><span class="w">  </span><span class="n">uniform_sampling</span><span class="p">.</span><span class="n">setInputCloud</span><span class="w"> </span><span class="p">(</span><span class="n">scene</span><span class="p">);</span><span class="w"></span>
<span class="linenos">268</span><span class="w">  </span><span class="n">uniform_sampling</span><span class="p">.</span><span class="n">setRadiusSearch</span><span class="w"> </span><span class="p">(</span><span class="n">scene_ss_</span><span class="p">);</span><span class="w"></span>
<span class="linenos">269</span><span class="w">  </span><span class="n">uniform_sampling</span><span class="p">.</span><span class="n">filter</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">scene_keypoints</span><span class="p">);</span><span class="w"></span>
<span class="linenos">270</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Scene total points: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">scene</span><span class="o">-&gt;</span><span class="n">size</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;; Selected Keypoints: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">scene_keypoints</span><span class="o">-&gt;</span><span class="n">size</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">271</span>
<span class="linenos">272</span><span class="w">  </span><span class="cm">/**</span>
<span class="linenos">273</span><span class="cm">   *  Compute Descriptor for keypoints</span>
<span class="linenos">274</span><span class="cm">   */</span><span class="w"></span>
<span class="linenos">275</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">SHOTEstimationOMP</span><span class="o">&lt;</span><span class="n">PointType</span><span class="p">,</span><span class="w"> </span><span class="n">NormalType</span><span class="p">,</span><span class="w"> </span><span class="n">DescriptorType</span><span class="o">&gt;</span><span class="w"> </span><span class="n">descr_est</span><span class="p">;</span><span class="w"></span>
<span class="linenos">276</span><span class="w">  </span><span class="n">descr_est</span><span class="p">.</span><span class="n">setRadiusSearch</span><span class="w"> </span><span class="p">(</span><span class="n">descr_rad_</span><span class="p">);</span><span class="w"></span>
<span class="linenos">277</span>
<span class="linenos">278</span><span class="w">  </span><span class="n">descr_est</span><span class="p">.</span><span class="n">setInputCloud</span><span class="w"> </span><span class="p">(</span><span class="n">model_keypoints</span><span class="p">);</span><span class="w"></span>
<span class="linenos">279</span><span class="w">  </span><span class="n">descr_est</span><span class="p">.</span><span class="n">setInputNormals</span><span class="w"> </span><span class="p">(</span><span class="n">model_normals</span><span class="p">);</span><span class="w"></span>
<span class="linenos">280</span><span class="w">  </span><span class="n">descr_est</span><span class="p">.</span><span class="n">setSearchSurface</span><span class="w"> </span><span class="p">(</span><span class="n">model</span><span class="p">);</span><span class="w"></span>
<span class="linenos">281</span><span class="w">  </span><span class="n">descr_est</span><span class="p">.</span><span class="n">compute</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">model_descriptors</span><span class="p">);</span><span class="w"></span>
<span class="linenos">282</span>
<span class="linenos">283</span><span class="w">  </span><span class="n">descr_est</span><span class="p">.</span><span class="n">setInputCloud</span><span class="w"> </span><span class="p">(</span><span class="n">scene_keypoints</span><span class="p">);</span><span class="w"></span>
<span class="linenos">284</span><span class="w">  </span><span class="n">descr_est</span><span class="p">.</span><span class="n">setInputNormals</span><span class="w"> </span><span class="p">(</span><span class="n">scene_normals</span><span class="p">);</span><span class="w"></span>
<span class="linenos">285</span><span class="w">  </span><span class="n">descr_est</span><span class="p">.</span><span class="n">setSearchSurface</span><span class="w"> </span><span class="p">(</span><span class="n">scene</span><span class="p">);</span><span class="w"></span>
<span class="linenos">286</span><span class="w">  </span><span class="n">descr_est</span><span class="p">.</span><span class="n">compute</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">scene_descriptors</span><span class="p">);</span><span class="w"></span>
<span class="linenos">287</span>
<span class="linenos">288</span><span class="w">  </span><span class="cm">/**</span>
<span class="linenos">289</span><span class="cm">   *  Find Model-Scene Correspondences with KdTree</span>
<span class="linenos">290</span><span class="cm">   */</span><span class="w"></span>
<span class="linenos">291</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">CorrespondencesPtr</span><span class="w"> </span><span class="n">model_scene_corrs</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">Correspondences</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="linenos">292</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">KdTreeFLANN</span><span class="o">&lt;</span><span class="n">DescriptorType</span><span class="o">&gt;</span><span class="w"> </span><span class="n">match_search</span><span class="p">;</span><span class="w"></span>
<span class="linenos">293</span><span class="w">  </span><span class="n">match_search</span><span class="p">.</span><span class="n">setInputCloud</span><span class="w"> </span><span class="p">(</span><span class="n">model_descriptors</span><span class="p">);</span><span class="w"></span>
<span class="linenos">294</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">model_good_keypoints_indices</span><span class="p">;</span><span class="w"></span>
<span class="linenos">295</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">scene_good_keypoints_indices</span><span class="p">;</span><span class="w"></span>
<span class="linenos">296</span>
<span class="linenos">297</span><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">scene_descriptors</span><span class="o">-&gt;</span><span class="n">size</span><span class="w"> </span><span class="p">();</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"></span>
<span class="linenos">298</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">299</span><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">neigh_indices</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="linenos">300</span><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="w"> </span><span class="n">neigh_sqr_dists</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="linenos">301</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">std</span><span class="o">::</span><span class="n">isfinite</span><span class="w"> </span><span class="p">(</span><span class="n">scene_descriptors</span><span class="o">-&gt;</span><span class="n">at</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="p">).</span><span class="n">descriptor</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span><span class="w">  </span><span class="c1">//skipping NaNs</span>
<span class="linenos">302</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">303</span><span class="w">      </span><span class="k">continue</span><span class="p">;</span><span class="w"></span>
<span class="linenos">304</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">305</span><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">found_neighs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">match_search</span><span class="p">.</span><span class="n">nearestKSearch</span><span class="w"> </span><span class="p">(</span><span class="n">scene_descriptors</span><span class="o">-&gt;</span><span class="n">at</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="p">),</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">neigh_indices</span><span class="p">,</span><span class="w"> </span><span class="n">neigh_sqr_dists</span><span class="p">);</span><span class="w"></span>
<span class="linenos">306</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">found_neighs</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">neigh_sqr_dists</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">0.25f</span><span class="p">)</span><span class="w"></span>
<span class="linenos">307</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">308</span><span class="w">      </span><span class="n">pcl</span><span class="o">::</span><span class="n">Correspondence</span><span class="w"> </span><span class="n">corr</span><span class="w"> </span><span class="p">(</span><span class="n">neigh_indices</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="p">),</span><span class="w"> </span><span class="n">neigh_sqr_dists</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span><span class="w"></span>
<span class="linenos">309</span><span class="w">      </span><span class="n">model_scene_corrs</span><span class="o">-&gt;</span><span class="n">push_back</span><span class="w"> </span><span class="p">(</span><span class="n">corr</span><span class="p">);</span><span class="w"></span>
<span class="linenos">310</span><span class="w">      </span><span class="n">model_good_keypoints_indices</span><span class="p">.</span><span class="n">push_back</span><span class="w"> </span><span class="p">(</span><span class="n">corr</span><span class="p">.</span><span class="n">index_query</span><span class="p">);</span><span class="w"></span>
<span class="linenos">311</span><span class="w">      </span><span class="n">scene_good_keypoints_indices</span><span class="p">.</span><span class="n">push_back</span><span class="w"> </span><span class="p">(</span><span class="n">corr</span><span class="p">.</span><span class="n">index_match</span><span class="p">);</span><span class="w"></span>
<span class="linenos">312</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">313</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">314</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">model_good_kp</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="linenos">315</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">scene_good_kp</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="linenos">316</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">copyPointCloud</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">model_keypoints</span><span class="p">,</span><span class="w"> </span><span class="n">model_good_keypoints_indices</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">model_good_kp</span><span class="p">);</span><span class="w"></span>
<span class="linenos">317</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">copyPointCloud</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">scene_keypoints</span><span class="p">,</span><span class="w"> </span><span class="n">scene_good_keypoints_indices</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">scene_good_kp</span><span class="p">);</span><span class="w"></span>
<span class="linenos">318</span>
<span class="linenos">319</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Correspondences found: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">model_scene_corrs</span><span class="o">-&gt;</span><span class="n">size</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">320</span>
<span class="linenos">321</span><span class="w">  </span><span class="cm">/**</span>
<span class="linenos">322</span><span class="cm">   *  Clustering</span>
<span class="linenos">323</span><span class="cm">   */</span><span class="w"></span>
<span class="linenos">324</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Eigen</span><span class="o">::</span><span class="n">Matrix4f</span><span class="p">,</span><span class="w"> </span><span class="n">Eigen</span><span class="o">::</span><span class="n">aligned_allocator</span><span class="o">&lt;</span><span class="n">Eigen</span><span class="o">::</span><span class="n">Matrix4f</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">rototranslations</span><span class="p">;</span><span class="w"></span>
<span class="linenos">325</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">Correspondences</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">clustered_corrs</span><span class="p">;</span><span class="w"></span>
<span class="linenos">326</span>
<span class="linenos">327</span><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">use_hough_</span><span class="p">)</span><span class="w"></span>
<span class="linenos">328</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">329</span><span class="w">    </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">RFType</span><span class="o">&gt;::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">model_rf</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">RFType</span><span class="o">&gt;</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="linenos">330</span><span class="w">    </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">RFType</span><span class="o">&gt;::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">scene_rf</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">RFType</span><span class="o">&gt;</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="linenos">331</span>
<span class="linenos">332</span><span class="w">    </span><span class="n">pcl</span><span class="o">::</span><span class="n">BOARDLocalReferenceFrameEstimation</span><span class="o">&lt;</span><span class="n">PointType</span><span class="p">,</span><span class="w"> </span><span class="n">NormalType</span><span class="p">,</span><span class="w"> </span><span class="n">RFType</span><span class="o">&gt;</span><span class="w"> </span><span class="n">rf_est</span><span class="p">;</span><span class="w"></span>
<span class="linenos">333</span><span class="w">    </span><span class="n">rf_est</span><span class="p">.</span><span class="n">setFindHoles</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">);</span><span class="w"></span>
<span class="linenos">334</span><span class="w">    </span><span class="n">rf_est</span><span class="p">.</span><span class="n">setRadiusSearch</span><span class="w"> </span><span class="p">(</span><span class="n">rf_rad_</span><span class="p">);</span><span class="w"></span>
<span class="linenos">335</span>
<span class="linenos">336</span><span class="w">    </span><span class="n">rf_est</span><span class="p">.</span><span class="n">setInputCloud</span><span class="w"> </span><span class="p">(</span><span class="n">model_keypoints</span><span class="p">);</span><span class="w"></span>
<span class="linenos">337</span><span class="w">    </span><span class="n">rf_est</span><span class="p">.</span><span class="n">setInputNormals</span><span class="w"> </span><span class="p">(</span><span class="n">model_normals</span><span class="p">);</span><span class="w"></span>
<span class="linenos">338</span><span class="w">    </span><span class="n">rf_est</span><span class="p">.</span><span class="n">setSearchSurface</span><span class="w"> </span><span class="p">(</span><span class="n">model</span><span class="p">);</span><span class="w"></span>
<span class="linenos">339</span><span class="w">    </span><span class="n">rf_est</span><span class="p">.</span><span class="n">compute</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">model_rf</span><span class="p">);</span><span class="w"></span>
<span class="linenos">340</span>
<span class="linenos">341</span><span class="w">    </span><span class="n">rf_est</span><span class="p">.</span><span class="n">setInputCloud</span><span class="w"> </span><span class="p">(</span><span class="n">scene_keypoints</span><span class="p">);</span><span class="w"></span>
<span class="linenos">342</span><span class="w">    </span><span class="n">rf_est</span><span class="p">.</span><span class="n">setInputNormals</span><span class="w"> </span><span class="p">(</span><span class="n">scene_normals</span><span class="p">);</span><span class="w"></span>
<span class="linenos">343</span><span class="w">    </span><span class="n">rf_est</span><span class="p">.</span><span class="n">setSearchSurface</span><span class="w"> </span><span class="p">(</span><span class="n">scene</span><span class="p">);</span><span class="w"></span>
<span class="linenos">344</span><span class="w">    </span><span class="n">rf_est</span><span class="p">.</span><span class="n">compute</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">scene_rf</span><span class="p">);</span><span class="w"></span>
<span class="linenos">345</span>
<span class="linenos">346</span><span class="w">    </span><span class="c1">//  Clustering</span>
<span class="linenos">347</span><span class="w">    </span><span class="n">pcl</span><span class="o">::</span><span class="n">Hough3DGrouping</span><span class="o">&lt;</span><span class="n">PointType</span><span class="p">,</span><span class="w"> </span><span class="n">PointType</span><span class="p">,</span><span class="w"> </span><span class="n">RFType</span><span class="p">,</span><span class="w"> </span><span class="n">RFType</span><span class="o">&gt;</span><span class="w"> </span><span class="n">clusterer</span><span class="p">;</span><span class="w"></span>
<span class="linenos">348</span><span class="w">    </span><span class="n">clusterer</span><span class="p">.</span><span class="n">setHoughBinSize</span><span class="w"> </span><span class="p">(</span><span class="n">cg_size_</span><span class="p">);</span><span class="w"></span>
<span class="linenos">349</span><span class="w">    </span><span class="n">clusterer</span><span class="p">.</span><span class="n">setHoughThreshold</span><span class="w"> </span><span class="p">(</span><span class="n">cg_thresh_</span><span class="p">);</span><span class="w"></span>
<span class="linenos">350</span><span class="w">    </span><span class="n">clusterer</span><span class="p">.</span><span class="n">setUseInterpolation</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">);</span><span class="w"></span>
<span class="linenos">351</span><span class="w">    </span><span class="n">clusterer</span><span class="p">.</span><span class="n">setUseDistanceWeight</span><span class="w"> </span><span class="p">(</span><span class="nb">false</span><span class="p">);</span><span class="w"></span>
<span class="linenos">352</span>
<span class="linenos">353</span><span class="w">    </span><span class="n">clusterer</span><span class="p">.</span><span class="n">setInputCloud</span><span class="w"> </span><span class="p">(</span><span class="n">model_keypoints</span><span class="p">);</span><span class="w"></span>
<span class="linenos">354</span><span class="w">    </span><span class="n">clusterer</span><span class="p">.</span><span class="n">setInputRf</span><span class="w"> </span><span class="p">(</span><span class="n">model_rf</span><span class="p">);</span><span class="w"></span>
<span class="linenos">355</span><span class="w">    </span><span class="n">clusterer</span><span class="p">.</span><span class="n">setSceneCloud</span><span class="w"> </span><span class="p">(</span><span class="n">scene_keypoints</span><span class="p">);</span><span class="w"></span>
<span class="linenos">356</span><span class="w">    </span><span class="n">clusterer</span><span class="p">.</span><span class="n">setSceneRf</span><span class="w"> </span><span class="p">(</span><span class="n">scene_rf</span><span class="p">);</span><span class="w"></span>
<span class="linenos">357</span><span class="w">    </span><span class="n">clusterer</span><span class="p">.</span><span class="n">setModelSceneCorrespondences</span><span class="w"> </span><span class="p">(</span><span class="n">model_scene_corrs</span><span class="p">);</span><span class="w"></span>
<span class="linenos">358</span>
<span class="linenos">359</span><span class="w">    </span><span class="n">clusterer</span><span class="p">.</span><span class="n">recognize</span><span class="w"> </span><span class="p">(</span><span class="n">rototranslations</span><span class="p">,</span><span class="w"> </span><span class="n">clustered_corrs</span><span class="p">);</span><span class="w"></span>
<span class="linenos">360</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">361</span><span class="w">  </span><span class="k">else</span><span class="w"></span>
<span class="linenos">362</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">363</span><span class="w">    </span><span class="n">pcl</span><span class="o">::</span><span class="n">GeometricConsistencyGrouping</span><span class="o">&lt;</span><span class="n">PointType</span><span class="p">,</span><span class="w"> </span><span class="n">PointType</span><span class="o">&gt;</span><span class="w"> </span><span class="n">gc_clusterer</span><span class="p">;</span><span class="w"></span>
<span class="linenos">364</span><span class="w">    </span><span class="n">gc_clusterer</span><span class="p">.</span><span class="n">setGCSize</span><span class="w"> </span><span class="p">(</span><span class="n">cg_size_</span><span class="p">);</span><span class="w"></span>
<span class="linenos">365</span><span class="w">    </span><span class="n">gc_clusterer</span><span class="p">.</span><span class="n">setGCThreshold</span><span class="w"> </span><span class="p">(</span><span class="n">cg_thresh_</span><span class="p">);</span><span class="w"></span>
<span class="linenos">366</span>
<span class="linenos">367</span><span class="w">    </span><span class="n">gc_clusterer</span><span class="p">.</span><span class="n">setInputCloud</span><span class="w"> </span><span class="p">(</span><span class="n">model_keypoints</span><span class="p">);</span><span class="w"></span>
<span class="linenos">368</span><span class="w">    </span><span class="n">gc_clusterer</span><span class="p">.</span><span class="n">setSceneCloud</span><span class="w"> </span><span class="p">(</span><span class="n">scene_keypoints</span><span class="p">);</span><span class="w"></span>
<span class="linenos">369</span><span class="w">    </span><span class="n">gc_clusterer</span><span class="p">.</span><span class="n">setModelSceneCorrespondences</span><span class="w"> </span><span class="p">(</span><span class="n">model_scene_corrs</span><span class="p">);</span><span class="w"></span>
<span class="linenos">370</span>
<span class="linenos">371</span><span class="w">    </span><span class="n">gc_clusterer</span><span class="p">.</span><span class="n">recognize</span><span class="w"> </span><span class="p">(</span><span class="n">rototranslations</span><span class="p">,</span><span class="w"> </span><span class="n">clustered_corrs</span><span class="p">);</span><span class="w"></span>
<span class="linenos">372</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">373</span>
<span class="linenos">374</span><span class="w">  </span><span class="cm">/**</span>
<span class="linenos">375</span><span class="cm">   * Stop if no instances</span>
<span class="linenos">376</span><span class="cm">   */</span><span class="w"></span>
<span class="linenos">377</span><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rototranslations</span><span class="p">.</span><span class="n">size</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"></span>
<span class="linenos">378</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">379</span><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;*** No instances found! ***&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">380</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="linenos">381</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">382</span><span class="w">  </span><span class="k">else</span><span class="w"></span>
<span class="linenos">383</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">384</span><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Recognized Instances: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">rototranslations</span><span class="p">.</span><span class="n">size</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">385</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">386</span>
<span class="linenos">387</span><span class="w">  </span><span class="cm">/**</span>
<span class="linenos">388</span><span class="cm">   * Generates clouds for each instances found </span>
<span class="linenos">389</span><span class="cm">   */</span><span class="w"></span>
<span class="linenos">390</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;::</span><span class="n">ConstPtr</span><span class="o">&gt;</span><span class="w"> </span><span class="n">instances</span><span class="p">;</span><span class="w"></span>
<span class="linenos">391</span>
<span class="linenos">392</span><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">rototranslations</span><span class="p">.</span><span class="n">size</span><span class="w"> </span><span class="p">();</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"></span>
<span class="linenos">393</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">394</span><span class="w">    </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">rotated_model</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="linenos">395</span><span class="w">    </span><span class="n">pcl</span><span class="o">::</span><span class="n">transformPointCloud</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">model</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">rotated_model</span><span class="p">,</span><span class="w"> </span><span class="n">rototranslations</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span><span class="w"></span>
<span class="linenos">396</span><span class="w">    </span><span class="n">instances</span><span class="p">.</span><span class="n">push_back</span><span class="w"> </span><span class="p">(</span><span class="n">rotated_model</span><span class="p">);</span><span class="w"></span>
<span class="linenos">397</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">398</span>
<span class="linenos">399</span><span class="w">  </span><span class="cm">/**</span>
<span class="linenos">400</span><span class="cm">   * ICP</span>
<span class="linenos">401</span><span class="cm">   */</span><span class="w"></span>
<span class="linenos">402</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;::</span><span class="n">ConstPtr</span><span class="o">&gt;</span><span class="w"> </span><span class="n">registered_instances</span><span class="p">;</span><span class="w"></span>
<span class="linenos">403</span><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"></span>
<span class="linenos">404</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">405</span><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;--- ICP ---------&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">406</span>
<span class="linenos">407</span><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">rototranslations</span><span class="p">.</span><span class="n">size</span><span class="w"> </span><span class="p">();</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"></span>
<span class="linenos">408</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">409</span><span class="w">      </span><span class="n">pcl</span><span class="o">::</span><span class="n">IterativeClosestPoint</span><span class="o">&lt;</span><span class="n">PointType</span><span class="p">,</span><span class="w"> </span><span class="n">PointType</span><span class="o">&gt;</span><span class="w"> </span><span class="n">icp</span><span class="p">;</span><span class="w"></span>
<span class="linenos">410</span><span class="w">      </span><span class="n">icp</span><span class="p">.</span><span class="n">setMaximumIterations</span><span class="w"> </span><span class="p">(</span><span class="n">icp_max_iter_</span><span class="p">);</span><span class="w"></span>
<span class="linenos">411</span><span class="w">      </span><span class="n">icp</span><span class="p">.</span><span class="n">setMaxCorrespondenceDistance</span><span class="w"> </span><span class="p">(</span><span class="n">icp_corr_distance_</span><span class="p">);</span><span class="w"></span>
<span class="linenos">412</span><span class="w">      </span><span class="n">icp</span><span class="p">.</span><span class="n">setInputTarget</span><span class="w"> </span><span class="p">(</span><span class="n">scene</span><span class="p">);</span><span class="w"></span>
<span class="linenos">413</span><span class="w">      </span><span class="n">icp</span><span class="p">.</span><span class="n">setInputSource</span><span class="w"> </span><span class="p">(</span><span class="n">instances</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span><span class="w"></span>
<span class="linenos">414</span><span class="w">      </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">registered</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">415</span><span class="w">      </span><span class="n">icp</span><span class="p">.</span><span class="n">align</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">registered</span><span class="p">);</span><span class="w"></span>
<span class="linenos">416</span><span class="w">      </span><span class="n">registered_instances</span><span class="p">.</span><span class="n">push_back</span><span class="w"> </span><span class="p">(</span><span class="n">registered</span><span class="p">);</span><span class="w"></span>
<span class="linenos">417</span><span class="w">      </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Instance &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="p">;</span><span class="w"></span>
<span class="linenos">418</span><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">icp</span><span class="p">.</span><span class="n">hasConverged</span><span class="w"> </span><span class="p">())</span><span class="w"></span>
<span class="linenos">419</span><span class="w">      </span><span class="p">{</span><span class="w"></span>
<span class="linenos">420</span><span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Aligned!&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">421</span><span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="linenos">422</span><span class="w">      </span><span class="k">else</span><span class="w"></span>
<span class="linenos">423</span><span class="w">      </span><span class="p">{</span><span class="w"></span>
<span class="linenos">424</span><span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Not Aligned!&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">425</span><span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="linenos">426</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">427</span>
<span class="linenos">428</span><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;-----------------&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">429</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">430</span>
<span class="linenos">431</span><span class="w">  </span><span class="cm">/**</span>
<span class="linenos">432</span><span class="cm">   * Hypothesis Verification</span>
<span class="linenos">433</span><span class="cm">   */</span><span class="w"></span>
<span class="linenos">434</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;--- Hypotheses Verification ---&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">435</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span><span class="w"> </span><span class="n">hypotheses_mask</span><span class="p">;</span><span class="w">  </span><span class="c1">// Mask Vector to identify positive hypotheses</span>
<span class="linenos">436</span>
<span class="linenos">437</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">GlobalHypothesesVerification</span><span class="o">&lt;</span><span class="n">PointType</span><span class="p">,</span><span class="w"> </span><span class="n">PointType</span><span class="o">&gt;</span><span class="w"> </span><span class="n">GoHv</span><span class="p">;</span><span class="w"></span>
<span class="linenos">438</span>
<span class="linenos">439</span><span class="w">  </span><span class="n">GoHv</span><span class="p">.</span><span class="n">setSceneCloud</span><span class="w"> </span><span class="p">(</span><span class="n">scene</span><span class="p">);</span><span class="w">  </span><span class="c1">// Scene Cloud</span>
<span class="linenos">440</span><span class="w">  </span><span class="n">GoHv</span><span class="p">.</span><span class="n">addModels</span><span class="w"> </span><span class="p">(</span><span class="n">registered_instances</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span><span class="w">  </span><span class="c1">//Models to verify</span>
<span class="linenos">441</span><span class="w">  </span><span class="n">GoHv</span><span class="p">.</span><span class="n">setResolution</span><span class="w"> </span><span class="p">(</span><span class="n">hv_resolution_</span><span class="p">);</span><span class="w"></span>
<span class="linenos">442</span><span class="w">  </span><span class="n">GoHv</span><span class="p">.</span><span class="n">setResolutionOccupancyGrid</span><span class="w"> </span><span class="p">(</span><span class="n">hv_occupancy_grid_resolution_</span><span class="p">);</span><span class="w"></span>
<span class="linenos">443</span><span class="w">  </span><span class="n">GoHv</span><span class="p">.</span><span class="n">setInlierThreshold</span><span class="w"> </span><span class="p">(</span><span class="n">hv_inlier_th_</span><span class="p">);</span><span class="w"></span>
<span class="linenos">444</span><span class="w">  </span><span class="n">GoHv</span><span class="p">.</span><span class="n">setOcclusionThreshold</span><span class="w"> </span><span class="p">(</span><span class="n">hv_occlusion_th_</span><span class="p">);</span><span class="w"></span>
<span class="linenos">445</span><span class="w">  </span><span class="n">GoHv</span><span class="p">.</span><span class="n">setRegularizer</span><span class="w"> </span><span class="p">(</span><span class="n">hv_regularizer_</span><span class="p">);</span><span class="w"></span>
<span class="linenos">446</span><span class="w">  </span><span class="n">GoHv</span><span class="p">.</span><span class="n">setRadiusClutter</span><span class="w"> </span><span class="p">(</span><span class="n">hv_rad_clutter_</span><span class="p">);</span><span class="w"></span>
<span class="linenos">447</span><span class="w">  </span><span class="n">GoHv</span><span class="p">.</span><span class="n">setClutterRegularizer</span><span class="w"> </span><span class="p">(</span><span class="n">hv_clutter_reg_</span><span class="p">);</span><span class="w"></span>
<span class="linenos">448</span><span class="w">  </span><span class="n">GoHv</span><span class="p">.</span><span class="n">setDetectClutter</span><span class="w"> </span><span class="p">(</span><span class="n">hv_detect_clutter_</span><span class="p">);</span><span class="w"></span>
<span class="linenos">449</span><span class="w">  </span><span class="n">GoHv</span><span class="p">.</span><span class="n">setRadiusNormals</span><span class="w"> </span><span class="p">(</span><span class="n">hv_rad_normals_</span><span class="p">);</span><span class="w"></span>
<span class="linenos">450</span>
<span class="linenos">451</span><span class="w">  </span><span class="n">GoHv</span><span class="p">.</span><span class="n">verify</span><span class="w"> </span><span class="p">();</span><span class="w"></span>
<span class="linenos">452</span><span class="w">  </span><span class="n">GoHv</span><span class="p">.</span><span class="n">getMask</span><span class="w"> </span><span class="p">(</span><span class="n">hypotheses_mask</span><span class="p">);</span><span class="w">  </span><span class="c1">// i-element TRUE if hvModels[i] verifies hypotheses</span>
<span class="linenos">453</span>
<span class="linenos">454</span><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">hypotheses_mask</span><span class="p">.</span><span class="n">size</span><span class="w"> </span><span class="p">();</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"></span>
<span class="linenos">455</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">456</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">hypotheses_mask</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="w"></span>
<span class="linenos">457</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">458</span><span class="w">      </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Instance &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot; is GOOD! &lt;---&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">459</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">460</span><span class="w">    </span><span class="k">else</span><span class="w"></span>
<span class="linenos">461</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">462</span><span class="w">      </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Instance &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot; is bad!&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">463</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">464</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">465</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;-------------------------------&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">466</span>
<span class="linenos">467</span><span class="w">  </span><span class="cm">/**</span>
<span class="linenos">468</span><span class="cm">   *  Visualization</span>
<span class="linenos">469</span><span class="cm">   */</span><span class="w"></span>
<span class="linenos">470</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="w"> </span><span class="n">viewer</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;Hypotheses Verification&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">471</span><span class="w">  </span><span class="n">viewer</span><span class="p">.</span><span class="n">addPointCloud</span><span class="w"> </span><span class="p">(</span><span class="n">scene</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;scene_cloud&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">472</span>
<span class="linenos">473</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">off_scene_model</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="linenos">474</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">off_scene_model_keypoints</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="linenos">475</span>
<span class="linenos">476</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">off_model_good_kp</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="linenos">477</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">transformPointCloud</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">model</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">off_scene_model</span><span class="p">,</span><span class="w"> </span><span class="n">Eigen</span><span class="o">::</span><span class="n">Vector3f</span><span class="w"> </span><span class="p">(</span><span class="mi">-1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="n">Eigen</span><span class="o">::</span><span class="n">Quaternionf</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">));</span><span class="w"></span>
<span class="linenos">478</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">transformPointCloud</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">model_keypoints</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">off_scene_model_keypoints</span><span class="p">,</span><span class="w"> </span><span class="n">Eigen</span><span class="o">::</span><span class="n">Vector3f</span><span class="w"> </span><span class="p">(</span><span class="mi">-1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="n">Eigen</span><span class="o">::</span><span class="n">Quaternionf</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">));</span><span class="w"></span>
<span class="linenos">479</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">transformPointCloud</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">model_good_kp</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">off_model_good_kp</span><span class="p">,</span><span class="w"> </span><span class="n">Eigen</span><span class="o">::</span><span class="n">Vector3f</span><span class="w"> </span><span class="p">(</span><span class="mi">-1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="n">Eigen</span><span class="o">::</span><span class="n">Quaternionf</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">));</span><span class="w"></span>
<span class="linenos">480</span>
<span class="linenos">481</span><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">show_keypoints_</span><span class="p">)</span><span class="w"></span>
<span class="linenos">482</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">483</span><span class="w">    </span><span class="n">CloudStyle</span><span class="w"> </span><span class="n">modelStyle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">style_white</span><span class="p">;</span><span class="w"></span>
<span class="linenos">484</span><span class="w">    </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PointCloudColorHandlerCustom</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;</span><span class="w"> </span><span class="n">off_scene_model_color_handler</span><span class="w"> </span><span class="p">(</span><span class="n">off_scene_model</span><span class="p">,</span><span class="w"> </span><span class="n">modelStyle</span><span class="p">.</span><span class="n">r</span><span class="p">,</span><span class="w"> </span><span class="n">modelStyle</span><span class="p">.</span><span class="n">g</span><span class="p">,</span><span class="w"> </span><span class="n">modelStyle</span><span class="p">.</span><span class="n">b</span><span class="p">);</span><span class="w"></span>
<span class="linenos">485</span><span class="w">    </span><span class="n">viewer</span><span class="p">.</span><span class="n">addPointCloud</span><span class="w"> </span><span class="p">(</span><span class="n">off_scene_model</span><span class="p">,</span><span class="w"> </span><span class="n">off_scene_model_color_handler</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;off_scene_model&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">486</span><span class="w">    </span><span class="n">viewer</span><span class="p">.</span><span class="n">setPointCloudRenderingProperties</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCL_VISUALIZER_POINT_SIZE</span><span class="p">,</span><span class="w"> </span><span class="n">modelStyle</span><span class="p">.</span><span class="n">size</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;off_scene_model&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">487</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">488</span>
<span class="linenos">489</span><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">show_keypoints_</span><span class="p">)</span><span class="w"></span>
<span class="linenos">490</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">491</span><span class="w">    </span><span class="n">CloudStyle</span><span class="w"> </span><span class="n">goodKeypointStyle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">style_violet</span><span class="p">;</span><span class="w"></span>
<span class="linenos">492</span><span class="w">    </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PointCloudColorHandlerCustom</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;</span><span class="w"> </span><span class="n">model_good_keypoints_color_handler</span><span class="w"> </span><span class="p">(</span><span class="n">off_model_good_kp</span><span class="p">,</span><span class="w"> </span><span class="n">goodKeypointStyle</span><span class="p">.</span><span class="n">r</span><span class="p">,</span><span class="w"> </span><span class="n">goodKeypointStyle</span><span class="p">.</span><span class="n">g</span><span class="p">,</span><span class="w"></span>
<span class="linenos">493</span><span class="w">                                                                                                    </span><span class="n">goodKeypointStyle</span><span class="p">.</span><span class="n">b</span><span class="p">);</span><span class="w"></span>
<span class="linenos">494</span><span class="w">    </span><span class="n">viewer</span><span class="p">.</span><span class="n">addPointCloud</span><span class="w"> </span><span class="p">(</span><span class="n">off_model_good_kp</span><span class="p">,</span><span class="w"> </span><span class="n">model_good_keypoints_color_handler</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;model_good_keypoints&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">495</span><span class="w">    </span><span class="n">viewer</span><span class="p">.</span><span class="n">setPointCloudRenderingProperties</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCL_VISUALIZER_POINT_SIZE</span><span class="p">,</span><span class="w"> </span><span class="n">goodKeypointStyle</span><span class="p">.</span><span class="n">size</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;model_good_keypoints&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">496</span>
<span class="linenos">497</span><span class="w">    </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PointCloudColorHandlerCustom</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;</span><span class="w"> </span><span class="n">scene_good_keypoints_color_handler</span><span class="w"> </span><span class="p">(</span><span class="n">scene_good_kp</span><span class="p">,</span><span class="w"> </span><span class="n">goodKeypointStyle</span><span class="p">.</span><span class="n">r</span><span class="p">,</span><span class="w"> </span><span class="n">goodKeypointStyle</span><span class="p">.</span><span class="n">g</span><span class="p">,</span><span class="w"></span>
<span class="linenos">498</span><span class="w">                                                                                                    </span><span class="n">goodKeypointStyle</span><span class="p">.</span><span class="n">b</span><span class="p">);</span><span class="w"></span>
<span class="linenos">499</span><span class="w">    </span><span class="n">viewer</span><span class="p">.</span><span class="n">addPointCloud</span><span class="w"> </span><span class="p">(</span><span class="n">scene_good_kp</span><span class="p">,</span><span class="w"> </span><span class="n">scene_good_keypoints_color_handler</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;scene_good_keypoints&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">500</span><span class="w">    </span><span class="n">viewer</span><span class="p">.</span><span class="n">setPointCloudRenderingProperties</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCL_VISUALIZER_POINT_SIZE</span><span class="p">,</span><span class="w"> </span><span class="n">goodKeypointStyle</span><span class="p">.</span><span class="n">size</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;scene_good_keypoints&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">501</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">502</span>
<span class="linenos">503</span><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">instances</span><span class="p">.</span><span class="n">size</span><span class="w"> </span><span class="p">();</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"></span>
<span class="linenos">504</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">505</span><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">stringstream</span><span class="w"> </span><span class="n">ss_instance</span><span class="p">;</span><span class="w"></span>
<span class="linenos">506</span><span class="w">    </span><span class="n">ss_instance</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;instance_&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">i</span><span class="p">;</span><span class="w"></span>
<span class="linenos">507</span>
<span class="linenos">508</span><span class="w">    </span><span class="n">CloudStyle</span><span class="w"> </span><span class="n">clusterStyle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">style_red</span><span class="p">;</span><span class="w"></span>
<span class="linenos">509</span><span class="w">    </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PointCloudColorHandlerCustom</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;</span><span class="w"> </span><span class="n">instance_color_handler</span><span class="w"> </span><span class="p">(</span><span class="n">instances</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">clusterStyle</span><span class="p">.</span><span class="n">r</span><span class="p">,</span><span class="w"> </span><span class="n">clusterStyle</span><span class="p">.</span><span class="n">g</span><span class="p">,</span><span class="w"> </span><span class="n">clusterStyle</span><span class="p">.</span><span class="n">b</span><span class="p">);</span><span class="w"></span>
<span class="linenos">510</span><span class="w">    </span><span class="n">viewer</span><span class="p">.</span><span class="n">addPointCloud</span><span class="w"> </span><span class="p">(</span><span class="n">instances</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">instance_color_handler</span><span class="p">,</span><span class="w"> </span><span class="n">ss_instance</span><span class="p">.</span><span class="n">str</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="linenos">511</span><span class="w">    </span><span class="n">viewer</span><span class="p">.</span><span class="n">setPointCloudRenderingProperties</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCL_VISUALIZER_POINT_SIZE</span><span class="p">,</span><span class="w"> </span><span class="n">clusterStyle</span><span class="p">.</span><span class="n">size</span><span class="p">,</span><span class="w"> </span><span class="n">ss_instance</span><span class="p">.</span><span class="n">str</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="linenos">512</span>
<span class="linenos">513</span><span class="w">    </span><span class="n">CloudStyle</span><span class="w"> </span><span class="n">registeredStyles</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hypotheses_mask</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">style_green</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">style_cyan</span><span class="p">;</span><span class="w"></span>
<span class="linenos">514</span><span class="w">    </span><span class="n">ss_instance</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;_registered&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">515</span><span class="w">    </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PointCloudColorHandlerCustom</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;</span><span class="w"> </span><span class="n">registered_instance_color_handler</span><span class="w"> </span><span class="p">(</span><span class="n">registered_instances</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">registeredStyles</span><span class="p">.</span><span class="n">r</span><span class="p">,</span><span class="w"></span>
<span class="linenos">516</span><span class="w">                                                                                                   </span><span class="n">registeredStyles</span><span class="p">.</span><span class="n">g</span><span class="p">,</span><span class="w"> </span><span class="n">registeredStyles</span><span class="p">.</span><span class="n">b</span><span class="p">);</span><span class="w"></span>
<span class="linenos">517</span><span class="w">    </span><span class="n">viewer</span><span class="p">.</span><span class="n">addPointCloud</span><span class="w"> </span><span class="p">(</span><span class="n">registered_instances</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">registered_instance_color_handler</span><span class="p">,</span><span class="w"> </span><span class="n">ss_instance</span><span class="p">.</span><span class="n">str</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="linenos">518</span><span class="w">    </span><span class="n">viewer</span><span class="p">.</span><span class="n">setPointCloudRenderingProperties</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCL_VISUALIZER_POINT_SIZE</span><span class="p">,</span><span class="w"> </span><span class="n">registeredStyles</span><span class="p">.</span><span class="n">size</span><span class="p">,</span><span class="w"> </span><span class="n">ss_instance</span><span class="p">.</span><span class="n">str</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="linenos">519</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">520</span>
<span class="linenos">521</span><span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">viewer</span><span class="p">.</span><span class="n">wasStopped</span><span class="w"> </span><span class="p">())</span><span class="w"></span>
<span class="linenos">522</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">523</span><span class="w">    </span><span class="n">viewer</span><span class="p">.</span><span class="n">spinOnce</span><span class="w"> </span><span class="p">();</span><span class="w"></span>
<span class="linenos">524</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">525</span>
<span class="linenos">526</span><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="linenos">527</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="walkthrough">
<h1>Walkthrough</h1>
<p>Take a look at the various parts of the code to see how it works.</p>
<section id="input-parameters">
<h2>Input Parameters</h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">bool</span><span class="w"> </span><span class="nf">hv_detect_clutter_</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">);</span><span class="w"></span>

<span class="cm">/**</span>
<span class="cm"> * Prints out Help message</span>
<span class="cm"> * @param filename Runnable App Name</span>
<span class="cm"> */</span><span class="w"></span>
</pre></div>
</div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="p">}</span><span class="w"></span>

<span class="cm">/**</span>
<span class="cm"> * Parses Command Line Arguments (Argc,Argv)</span>
<span class="cm"> * @param argc</span>
<span class="cm"> * @param argv</span>
<span class="cm"> */</span><span class="w"></span>
<span class="kt">void</span><span class="w"></span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">showHelp</span></code> function prints out the input parameters accepted by the program. <code class="docutils literal notranslate"><span class="pre">parseCommandLine</span></code> binds the user input with program parameters.</p>
<p>The only two mandatory parameters are <code class="docutils literal notranslate"><span class="pre">model_filename</span></code> and <code class="docutils literal notranslate"><span class="pre">scene_filename</span></code> (all other parameters are initialized with a default value).
Other usefuls commands are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--algorithm</span> <span class="pre">(Hough|GC)</span></code> used to switch clustering algorithm. See <a class="reference internal" href="correspondence_grouping.html#correspondence-grouping"><span class="std std-ref">3D Object Recognition based on Correspondence Grouping</span></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-k</span></code> shows the keypoints used to compute the correspondences</p></li>
</ul>
<p>Hypotheses Verification parameters are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--hv_clutter_reg</span> <span class="pre">val:</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">Clutter</span> <span class="pre">Regularizer</span> <span class="pre">(default</span> <span class="pre">5.0)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--hv_inlier_th</span> <span class="pre">val:</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">Inlier</span> <span class="pre">threshold</span> <span class="pre">(default</span> <span class="pre">0.005)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--hv_occlusion_th</span> <span class="pre">val:</span>&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">Occlusion</span> <span class="pre">threshold</span> <span class="pre">(default</span> <span class="pre">0.01)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--hv_rad_clutter</span> <span class="pre">val:</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">Clutter</span> <span class="pre">radius</span> <span class="pre">(default</span> <span class="pre">0.03)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--hv_regularizer</span> <span class="pre">val:</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">Regularizer</span> <span class="pre">value</span> <span class="pre">(default</span> <span class="pre">3.0)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--hv_rad_normals</span> <span class="pre">val:</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">Normals</span> <span class="pre">radius</span> <span class="pre">(default</span> <span class="pre">0.05)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--hv_detect_clutter</span> <span class="pre">val:</span>&#160;&#160;&#160;&#160; <span class="pre">TRUE</span> <span class="pre">if</span> <span class="pre">clutter</span> <span class="pre">detect</span> <span class="pre">enabled</span> <span class="pre">(default</span> <span class="pre">true)</span></code></p></li>
</ul>
<p>More details on the Global Hypothesis Verification parameters can be found here:
A. Aldoma, F. Tombari, L. Di Stefano, M. Vincze, <cite>A global hypothesis verification method for 3D object recognition</cite>, ECCV 2012.</p>
</section>
<section id="helpers">
<h2>Helpers</h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">CloudStyle</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">r</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">g</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">size</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">CloudStyle</span><span class="w"> </span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">r</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="kt">double</span><span class="w"> </span><span class="n">g</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="kt">double</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="kt">double</span><span class="w"> </span><span class="n">size</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"></span>
<span class="w">        </span><span class="n">r</span><span class="w"> </span><span class="p">(</span><span class="n">r</span><span class="p">),</span><span class="w"></span>
<span class="w">        </span><span class="n">g</span><span class="w"> </span><span class="p">(</span><span class="n">g</span><span class="p">),</span><span class="w"></span>
<span class="w">        </span><span class="n">b</span><span class="w"> </span><span class="p">(</span><span class="n">b</span><span class="p">),</span><span class="w"></span>
<span class="w">        </span><span class="n">size</span><span class="w"> </span><span class="p">(</span><span class="n">size</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>

<span class="n">CloudStyle</span><span class="w"> </span><span class="nf">style_white</span><span class="w"> </span><span class="p">(</span><span class="mf">255.0</span><span class="p">,</span><span class="w"> </span><span class="mf">255.0</span><span class="p">,</span><span class="w"> </span><span class="mf">255.0</span><span class="p">,</span><span class="w"> </span><span class="mf">4.0</span><span class="p">);</span><span class="w"></span>
<span class="n">CloudStyle</span><span class="w"> </span><span class="nf">style_red</span><span class="w"> </span><span class="p">(</span><span class="mf">255.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">3.0</span><span class="p">);</span><span class="w"></span>
<span class="n">CloudStyle</span><span class="w"> </span><span class="nf">style_green</span><span class="w"> </span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">255.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">5.0</span><span class="p">);</span><span class="w"></span>
<span class="n">CloudStyle</span><span class="w"> </span><span class="nf">style_cyan</span><span class="w"> </span><span class="p">(</span><span class="mf">93.0</span><span class="p">,</span><span class="w"> </span><span class="mf">200.0</span><span class="p">,</span><span class="w"> </span><span class="mf">217.0</span><span class="p">,</span><span class="w"> </span><span class="mf">4.0</span><span class="p">);</span><span class="w"></span>
<span class="n">CloudStyle</span><span class="w"> </span><span class="nf">style_violet</span><span class="w"> </span><span class="p">(</span><span class="mf">255.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">255.0</span><span class="p">,</span><span class="w"> </span><span class="mf">8.0</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>This simple struct is used to create <cite>Color</cite> presets for the clouds being visualized.</p>
</section>
<section id="clustering">
<h2>Clustering</h2>
<p>The code below implements a full Clustering Pipeline: the input of the pipeline is a pair of point clouds (the <code class="docutils literal notranslate"><span class="pre">model</span></code> and the <code class="docutils literal notranslate"><span class="pre">scene</span></code>), and the output is</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="p">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Eigen</span><span class="p">::</span><span class="n">Matrix4f</span><span class="p">,</span> <span class="n">Eigen</span><span class="p">::</span><span class="n">aligned_allocator</span><span class="o">&lt;</span><span class="n">Eigen</span><span class="p">::</span><span class="n">Matrix4f</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">rototranslations</span><span class="p">;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">rototraslations</span></code> represents a list of <cite>coarsely</cite> transformed models (“object hypotheses”) in the scene.</p>
<p>Take a look at the full pipeline:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="cm">/**</span>
<span class="cm">   * Compute Normals</span>
<span class="cm">   */</span><span class="w"></span>
<span class="hll"><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">NormalEstimationOMP</span><span class="o">&lt;</span><span class="n">PointType</span><span class="p">,</span><span class="w"> </span><span class="n">NormalType</span><span class="o">&gt;</span><span class="w"> </span><span class="n">norm_est</span><span class="p">;</span><span class="w"></span>
</span><span class="w">  </span><span class="n">norm_est</span><span class="p">.</span><span class="n">setKSearch</span><span class="w"> </span><span class="p">(</span><span class="mi">10</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">norm_est</span><span class="p">.</span><span class="n">setInputCloud</span><span class="w"> </span><span class="p">(</span><span class="n">model</span><span class="p">);</span><span class="w"></span>
<span class="hll"><span class="w">  </span><span class="n">norm_est</span><span class="p">.</span><span class="n">compute</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">model_normals</span><span class="p">);</span><span class="w"></span>
</span>
<span class="w">  </span><span class="n">norm_est</span><span class="p">.</span><span class="n">setInputCloud</span><span class="w"> </span><span class="p">(</span><span class="n">scene</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">norm_est</span><span class="p">.</span><span class="n">compute</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">scene_normals</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="cm">/**</span>
<span class="cm">   *  Downsample Clouds to Extract keypoints</span>
<span class="cm">   */</span><span class="w"></span>
<span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">UniformSampling</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;</span><span class="w"> </span><span class="n">uniform_sampling</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="n">uniform_sampling</span><span class="p">.</span><span class="n">setInputCloud</span><span class="w"> </span><span class="p">(</span><span class="n">model</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">uniform_sampling</span><span class="p">.</span><span class="n">setRadiusSearch</span><span class="w"> </span><span class="p">(</span><span class="n">model_ss_</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">uniform_sampling</span><span class="p">.</span><span class="n">filter</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">model_keypoints</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Model total points: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">model</span><span class="o">-&gt;</span><span class="n">size</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;; Selected Keypoints: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">model_keypoints</span><span class="o">-&gt;</span><span class="n">size</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="n">uniform_sampling</span><span class="p">.</span><span class="n">setInputCloud</span><span class="w"> </span><span class="p">(</span><span class="n">scene</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">uniform_sampling</span><span class="p">.</span><span class="n">setRadiusSearch</span><span class="w"> </span><span class="p">(</span><span class="n">scene_ss_</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">uniform_sampling</span><span class="p">.</span><span class="n">filter</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">scene_keypoints</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Scene total points: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">scene</span><span class="o">-&gt;</span><span class="n">size</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;; Selected Keypoints: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">scene_keypoints</span><span class="o">-&gt;</span><span class="n">size</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="cm">/**</span>
<span class="cm">   *  Compute Descriptor for keypoints</span>
<span class="cm">   */</span><span class="w"></span>
<span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">SHOTEstimationOMP</span><span class="o">&lt;</span><span class="n">PointType</span><span class="p">,</span><span class="w"> </span><span class="n">NormalType</span><span class="p">,</span><span class="w"> </span><span class="n">DescriptorType</span><span class="o">&gt;</span><span class="w"> </span><span class="n">descr_est</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="n">descr_est</span><span class="p">.</span><span class="n">setRadiusSearch</span><span class="w"> </span><span class="p">(</span><span class="n">descr_rad_</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="n">descr_est</span><span class="p">.</span><span class="n">setInputCloud</span><span class="w"> </span><span class="p">(</span><span class="n">model_keypoints</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">descr_est</span><span class="p">.</span><span class="n">setInputNormals</span><span class="w"> </span><span class="p">(</span><span class="n">model_normals</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">descr_est</span><span class="p">.</span><span class="n">setSearchSurface</span><span class="w"> </span><span class="p">(</span><span class="n">model</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">descr_est</span><span class="p">.</span><span class="n">compute</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">model_descriptors</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="n">descr_est</span><span class="p">.</span><span class="n">setInputCloud</span><span class="w"> </span><span class="p">(</span><span class="n">scene_keypoints</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">descr_est</span><span class="p">.</span><span class="n">setInputNormals</span><span class="w"> </span><span class="p">(</span><span class="n">scene_normals</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">descr_est</span><span class="p">.</span><span class="n">setSearchSurface</span><span class="w"> </span><span class="p">(</span><span class="n">scene</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">descr_est</span><span class="p">.</span><span class="n">compute</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">scene_descriptors</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="cm">/**</span>
<span class="cm">   *  Find Model-Scene Correspondences with KdTree</span>
<span class="cm">   */</span><span class="w"></span>
<span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">CorrespondencesPtr</span><span class="w"> </span><span class="nf">model_scene_corrs</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">Correspondences</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">KdTreeFLANN</span><span class="o">&lt;</span><span class="n">DescriptorType</span><span class="o">&gt;</span><span class="w"> </span><span class="n">match_search</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="n">match_search</span><span class="p">.</span><span class="n">setInputCloud</span><span class="w"> </span><span class="p">(</span><span class="n">model_descriptors</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">model_good_keypoints_indices</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">scene_good_keypoints_indices</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">scene_descriptors</span><span class="o">-&gt;</span><span class="n">size</span><span class="w"> </span><span class="p">();</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">neigh_indices</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="w"> </span><span class="n">neigh_sqr_dists</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">std</span><span class="o">::</span><span class="n">isfinite</span><span class="w"> </span><span class="p">(</span><span class="n">scene_descriptors</span><span class="o">-&gt;</span><span class="n">at</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="p">).</span><span class="n">descriptor</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span><span class="w">  </span><span class="c1">//skipping NaNs</span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="k">continue</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">found_neighs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">match_search</span><span class="p">.</span><span class="n">nearestKSearch</span><span class="w"> </span><span class="p">(</span><span class="n">scene_descriptors</span><span class="o">-&gt;</span><span class="n">at</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="p">),</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">neigh_indices</span><span class="p">,</span><span class="w"> </span><span class="n">neigh_sqr_dists</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">found_neighs</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">neigh_sqr_dists</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">0.25f</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="n">pcl</span><span class="o">::</span><span class="n">Correspondence</span><span class="w"> </span><span class="nf">corr</span><span class="w"> </span><span class="p">(</span><span class="n">neigh_indices</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="p">),</span><span class="w"> </span><span class="n">neigh_sqr_dists</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span><span class="w"></span>
<span class="w">      </span><span class="n">model_scene_corrs</span><span class="o">-&gt;</span><span class="n">push_back</span><span class="w"> </span><span class="p">(</span><span class="n">corr</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="n">model_good_keypoints_indices</span><span class="p">.</span><span class="n">push_back</span><span class="w"> </span><span class="p">(</span><span class="n">corr</span><span class="p">.</span><span class="n">index_query</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="n">scene_good_keypoints_indices</span><span class="p">.</span><span class="n">push_back</span><span class="w"> </span><span class="p">(</span><span class="n">corr</span><span class="p">.</span><span class="n">index_match</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">model_good_kp</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">scene_good_kp</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">copyPointCloud</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">model_keypoints</span><span class="p">,</span><span class="w"> </span><span class="n">model_good_keypoints_indices</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">model_good_kp</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">copyPointCloud</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">scene_keypoints</span><span class="p">,</span><span class="w"> </span><span class="n">scene_good_keypoints_indices</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">scene_good_kp</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Correspondences found: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">model_scene_corrs</span><span class="o">-&gt;</span><span class="n">size</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="cm">/**</span>
<span class="cm">   *  Clustering</span>
<span class="cm">   */</span><span class="w"></span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Eigen</span><span class="o">::</span><span class="n">Matrix4f</span><span class="p">,</span><span class="w"> </span><span class="n">Eigen</span><span class="o">::</span><span class="n">aligned_allocator</span><span class="o">&lt;</span><span class="n">Eigen</span><span class="o">::</span><span class="n">Matrix4f</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">rototranslations</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">Correspondences</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">clustered_corrs</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">use_hough_</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">RFType</span><span class="o">&gt;::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">model_rf</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">RFType</span><span class="o">&gt;</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="w">    </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">RFType</span><span class="o">&gt;::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">scene_rf</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">RFType</span><span class="o">&gt;</span><span class="w"> </span><span class="p">());</span><span class="w"></span>

<span class="w">    </span><span class="n">pcl</span><span class="o">::</span><span class="n">BOARDLocalReferenceFrameEstimation</span><span class="o">&lt;</span><span class="n">PointType</span><span class="p">,</span><span class="w"> </span><span class="n">NormalType</span><span class="p">,</span><span class="w"> </span><span class="n">RFType</span><span class="o">&gt;</span><span class="w"> </span><span class="n">rf_est</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">rf_est</span><span class="p">.</span><span class="n">setFindHoles</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">rf_est</span><span class="p">.</span><span class="n">setRadiusSearch</span><span class="w"> </span><span class="p">(</span><span class="n">rf_rad_</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">rf_est</span><span class="p">.</span><span class="n">setInputCloud</span><span class="w"> </span><span class="p">(</span><span class="n">model_keypoints</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">rf_est</span><span class="p">.</span><span class="n">setInputNormals</span><span class="w"> </span><span class="p">(</span><span class="n">model_normals</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">rf_est</span><span class="p">.</span><span class="n">setSearchSurface</span><span class="w"> </span><span class="p">(</span><span class="n">model</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">rf_est</span><span class="p">.</span><span class="n">compute</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">model_rf</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">rf_est</span><span class="p">.</span><span class="n">setInputCloud</span><span class="w"> </span><span class="p">(</span><span class="n">scene_keypoints</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">rf_est</span><span class="p">.</span><span class="n">setInputNormals</span><span class="w"> </span><span class="p">(</span><span class="n">scene_normals</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">rf_est</span><span class="p">.</span><span class="n">setSearchSurface</span><span class="w"> </span><span class="p">(</span><span class="n">scene</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">rf_est</span><span class="p">.</span><span class="n">compute</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">scene_rf</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="c1">//  Clustering</span>
<span class="w">    </span><span class="n">pcl</span><span class="o">::</span><span class="n">Hough3DGrouping</span><span class="o">&lt;</span><span class="n">PointType</span><span class="p">,</span><span class="w"> </span><span class="n">PointType</span><span class="p">,</span><span class="w"> </span><span class="n">RFType</span><span class="p">,</span><span class="w"> </span><span class="n">RFType</span><span class="o">&gt;</span><span class="w"> </span><span class="n">clusterer</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">clusterer</span><span class="p">.</span><span class="n">setHoughBinSize</span><span class="w"> </span><span class="p">(</span><span class="n">cg_size_</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">clusterer</span><span class="p">.</span><span class="n">setHoughThreshold</span><span class="w"> </span><span class="p">(</span><span class="n">cg_thresh_</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">clusterer</span><span class="p">.</span><span class="n">setUseInterpolation</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">clusterer</span><span class="p">.</span><span class="n">setUseDistanceWeight</span><span class="w"> </span><span class="p">(</span><span class="nb">false</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">clusterer</span><span class="p">.</span><span class="n">setInputCloud</span><span class="w"> </span><span class="p">(</span><span class="n">model_keypoints</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">clusterer</span><span class="p">.</span><span class="n">setInputRf</span><span class="w"> </span><span class="p">(</span><span class="n">model_rf</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">clusterer</span><span class="p">.</span><span class="n">setSceneCloud</span><span class="w"> </span><span class="p">(</span><span class="n">scene_keypoints</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">clusterer</span><span class="p">.</span><span class="n">setSceneRf</span><span class="w"> </span><span class="p">(</span><span class="n">scene_rf</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">clusterer</span><span class="p">.</span><span class="n">setModelSceneCorrespondences</span><span class="w"> </span><span class="p">(</span><span class="n">model_scene_corrs</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">clusterer</span><span class="p">.</span><span class="n">recognize</span><span class="w"> </span><span class="p">(</span><span class="n">rototranslations</span><span class="p">,</span><span class="w"> </span><span class="n">clustered_corrs</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="k">else</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">pcl</span><span class="o">::</span><span class="n">GeometricConsistencyGrouping</span><span class="o">&lt;</span><span class="n">PointType</span><span class="p">,</span><span class="w"> </span><span class="n">PointType</span><span class="o">&gt;</span><span class="w"> </span><span class="n">gc_clusterer</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">gc_clusterer</span><span class="p">.</span><span class="n">setGCSize</span><span class="w"> </span><span class="p">(</span><span class="n">cg_size_</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">gc_clusterer</span><span class="p">.</span><span class="n">setGCThreshold</span><span class="w"> </span><span class="p">(</span><span class="n">cg_thresh_</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">gc_clusterer</span><span class="p">.</span><span class="n">setInputCloud</span><span class="w"> </span><span class="p">(</span><span class="n">model_keypoints</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">gc_clusterer</span><span class="p">.</span><span class="n">setSceneCloud</span><span class="w"> </span><span class="p">(</span><span class="n">scene_keypoints</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">gc_clusterer</span><span class="p">.</span><span class="n">setModelSceneCorrespondences</span><span class="w"> </span><span class="p">(</span><span class="n">model_scene_corrs</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">gc_clusterer</span><span class="p">.</span><span class="n">recognize</span><span class="w"> </span><span class="p">(</span><span class="n">rototranslations</span><span class="p">,</span><span class="w"> </span><span class="n">clustered_corrs</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="cm">/**</span>
</pre></div>
</div>
<p>For a full explanation of the above code see <a class="reference external" href="https://pcl.readthedocs.io/projects/tutorials/en/master/correspondence_grouping.html">3D Object Recognition based on Correspondence Grouping</a>.</p>
</section>
<section id="model-in-scene-projection">
<h2>Model-in-Scene Projection</h2>
<p>To improve the <cite>coarse</cite> transformation associated to each object hypothesis, we apply some ICP iterations.
We create a <code class="docutils literal notranslate"><span class="pre">instances</span></code> list to store the “coarse” transformations :</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="cm">/**</span>
<span class="cm">   * Generates clouds for each instances found </span>
<span class="cm">   */</span><span class="w"></span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;::</span><span class="n">ConstPtr</span><span class="o">&gt;</span><span class="w"> </span><span class="n">instances</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">rototranslations</span><span class="p">.</span><span class="n">size</span><span class="w"> </span><span class="p">();</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">rotated_model</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="w">    </span><span class="n">pcl</span><span class="o">::</span><span class="n">transformPointCloud</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">model</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">rotated_model</span><span class="p">,</span><span class="w"> </span><span class="n">rototranslations</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span><span class="w"></span>
<span class="w">    </span><span class="n">instances</span><span class="p">.</span><span class="n">push_back</span><span class="w"> </span><span class="p">(</span><span class="n">rotated_model</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>then, we run ICP on the <code class="docutils literal notranslate"><span class="pre">instances</span></code> wrt. the <code class="docutils literal notranslate"><span class="pre">scene</span></code> to obtain the <code class="docutils literal notranslate"><span class="pre">registered_instances</span></code>:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="cm">/**</span>
<span class="cm">   * ICP</span>
<span class="cm">   */</span><span class="w"></span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;::</span><span class="n">ConstPtr</span><span class="o">&gt;</span><span class="w"> </span><span class="n">registered_instances</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;--- ICP ---------&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">rototranslations</span><span class="p">.</span><span class="n">size</span><span class="w"> </span><span class="p">();</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="n">pcl</span><span class="o">::</span><span class="n">IterativeClosestPoint</span><span class="o">&lt;</span><span class="n">PointType</span><span class="p">,</span><span class="w"> </span><span class="n">PointType</span><span class="o">&gt;</span><span class="w"> </span><span class="n">icp</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="n">icp</span><span class="p">.</span><span class="n">setMaximumIterations</span><span class="w"> </span><span class="p">(</span><span class="n">icp_max_iter_</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="n">icp</span><span class="p">.</span><span class="n">setMaxCorrespondenceDistance</span><span class="w"> </span><span class="p">(</span><span class="n">icp_corr_distance_</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="n">icp</span><span class="p">.</span><span class="n">setInputTarget</span><span class="w"> </span><span class="p">(</span><span class="n">scene</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="n">icp</span><span class="p">.</span><span class="n">setInputSource</span><span class="w"> </span><span class="p">(</span><span class="n">instances</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span><span class="w"></span>
<span class="w">      </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">registered</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="n">icp</span><span class="p">.</span><span class="n">align</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">registered</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="n">registered_instances</span><span class="p">.</span><span class="n">push_back</span><span class="w"> </span><span class="p">(</span><span class="n">registered</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Instance &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">icp</span><span class="p">.</span><span class="n">hasConverged</span><span class="w"> </span><span class="p">())</span><span class="w"></span>
<span class="w">      </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Aligned!&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="k">else</span><span class="w"></span>
<span class="w">      </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Not Aligned!&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;-----------------&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="hypotheses-verification">
<h2>Hypotheses Verification</h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="cm">/**</span>
<span class="cm">   * Hypothesis Verification</span>
<span class="cm">   */</span><span class="w"></span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;--- Hypotheses Verification ---&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span><span class="w"> </span><span class="n">hypotheses_mask</span><span class="p">;</span><span class="w">  </span><span class="c1">// Mask Vector to identify positive hypotheses</span>

<span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">GlobalHypothesesVerification</span><span class="o">&lt;</span><span class="n">PointType</span><span class="p">,</span><span class="w"> </span><span class="n">PointType</span><span class="o">&gt;</span><span class="w"> </span><span class="n">GoHv</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="n">GoHv</span><span class="p">.</span><span class="n">setSceneCloud</span><span class="w"> </span><span class="p">(</span><span class="n">scene</span><span class="p">);</span><span class="w">  </span><span class="c1">// Scene Cloud</span>
<span class="w">  </span><span class="n">GoHv</span><span class="p">.</span><span class="n">addModels</span><span class="w"> </span><span class="p">(</span><span class="n">registered_instances</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span><span class="w">  </span><span class="c1">//Models to verify</span>
<span class="w">  </span><span class="n">GoHv</span><span class="p">.</span><span class="n">setResolution</span><span class="w"> </span><span class="p">(</span><span class="n">hv_resolution_</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">GoHv</span><span class="p">.</span><span class="n">setResolutionOccupancyGrid</span><span class="w"> </span><span class="p">(</span><span class="n">hv_occupancy_grid_resolution_</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">GoHv</span><span class="p">.</span><span class="n">setInlierThreshold</span><span class="w"> </span><span class="p">(</span><span class="n">hv_inlier_th_</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">GoHv</span><span class="p">.</span><span class="n">setOcclusionThreshold</span><span class="w"> </span><span class="p">(</span><span class="n">hv_occlusion_th_</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">GoHv</span><span class="p">.</span><span class="n">setRegularizer</span><span class="w"> </span><span class="p">(</span><span class="n">hv_regularizer_</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">GoHv</span><span class="p">.</span><span class="n">setRadiusClutter</span><span class="w"> </span><span class="p">(</span><span class="n">hv_rad_clutter_</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">GoHv</span><span class="p">.</span><span class="n">setClutterRegularizer</span><span class="w"> </span><span class="p">(</span><span class="n">hv_clutter_reg_</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">GoHv</span><span class="p">.</span><span class="n">setDetectClutter</span><span class="w"> </span><span class="p">(</span><span class="n">hv_detect_clutter_</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">GoHv</span><span class="p">.</span><span class="n">setRadiusNormals</span><span class="w"> </span><span class="p">(</span><span class="n">hv_rad_normals_</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="n">GoHv</span><span class="p">.</span><span class="n">verify</span><span class="w"> </span><span class="p">();</span><span class="w"></span>
<span class="w">  </span><span class="n">GoHv</span><span class="p">.</span><span class="n">getMask</span><span class="w"> </span><span class="p">(</span><span class="n">hypotheses_mask</span><span class="p">);</span><span class="w">  </span><span class="c1">// i-element TRUE if hvModels[i] verifies hypotheses</span>

<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">hypotheses_mask</span><span class="p">.</span><span class="n">size</span><span class="w"> </span><span class="p">();</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">hypotheses_mask</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Instance &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot; is GOOD! &lt;---&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="k">else</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Instance &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot; is bad!&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;-------------------------------&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">GlobalHypothesesVerification</span></code> takes as input a list of <code class="docutils literal notranslate"><span class="pre">registered_instances</span></code> and a <code class="docutils literal notranslate"><span class="pre">scene</span></code> so we can <code class="docutils literal notranslate"><span class="pre">verify()</span></code> them
to get a <code class="docutils literal notranslate"><span class="pre">hypotheses_mask</span></code>: this is a <cite>bool</cite> array where <code class="docutils literal notranslate"><span class="pre">hypotheses_mask[i]</span></code> is <code class="docutils literal notranslate"><span class="pre">TRUE</span></code> if <code class="docutils literal notranslate"><span class="pre">registered_instances[i]</span></code> is a
verified hypothesis, <code class="docutils literal notranslate"><span class="pre">FALSE</span></code> if it has been classified as a False Positive (hence, must be rejected).</p>
</section>
<section id="visualization">
<h2>Visualization</h2>
<p>The first part of the Visualization code section is pretty simple, with <code class="docutils literal notranslate"><span class="pre">-k</span></code> options the program displays <cite>goog keypoints</cite> in model and in scene
with a <code class="docutils literal notranslate"><span class="pre">styleViolet</span></code> color.</p>
<p>Later we iterate on <code class="docutils literal notranslate"><span class="pre">instances</span></code>, and each <code class="docutils literal notranslate"><span class="pre">instances[i]</span></code> will be displayed in <cite>Viewer</cite> with a <code class="docutils literal notranslate"><span class="pre">styleRed</span></code> color.
Each <code class="docutils literal notranslate"><span class="pre">registered_instances[i]</span></code> will be displayed with two optional colors: <code class="docutils literal notranslate"><span class="pre">styleGreen</span></code> if the current instance is verified (<code class="docutils literal notranslate"><span class="pre">hypotheses_mask[i]</span></code> is <code class="docutils literal notranslate"><span class="pre">TRUE</span></code>),  <code class="docutils literal notranslate"><span class="pre">styleCyan</span></code> otherwise.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="cm">/**</span>
<span class="cm">   *  Visualization</span>
<span class="cm">   */</span><span class="w"></span>
<span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="w"> </span><span class="nf">viewer</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;Hypotheses Verification&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">viewer</span><span class="p">.</span><span class="n">addPointCloud</span><span class="w"> </span><span class="p">(</span><span class="n">scene</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;scene_cloud&quot;</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">off_scene_model</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">off_scene_model_keypoints</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;</span><span class="w"> </span><span class="p">());</span><span class="w"></span>

<span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">off_model_good_kp</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">transformPointCloud</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">model</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">off_scene_model</span><span class="p">,</span><span class="w"> </span><span class="n">Eigen</span><span class="o">::</span><span class="n">Vector3f</span><span class="w"> </span><span class="p">(</span><span class="mi">-1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="n">Eigen</span><span class="o">::</span><span class="n">Quaternionf</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">));</span><span class="w"></span>
<span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">transformPointCloud</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">model_keypoints</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">off_scene_model_keypoints</span><span class="p">,</span><span class="w"> </span><span class="n">Eigen</span><span class="o">::</span><span class="n">Vector3f</span><span class="w"> </span><span class="p">(</span><span class="mi">-1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="n">Eigen</span><span class="o">::</span><span class="n">Quaternionf</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">));</span><span class="w"></span>
<span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">transformPointCloud</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">model_good_kp</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">off_model_good_kp</span><span class="p">,</span><span class="w"> </span><span class="n">Eigen</span><span class="o">::</span><span class="n">Vector3f</span><span class="w"> </span><span class="p">(</span><span class="mi">-1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="n">Eigen</span><span class="o">::</span><span class="n">Quaternionf</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">));</span><span class="w"></span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">show_keypoints_</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">CloudStyle</span><span class="w"> </span><span class="n">modelStyle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">style_white</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PointCloudColorHandlerCustom</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;</span><span class="w"> </span><span class="n">off_scene_model_color_handler</span><span class="w"> </span><span class="p">(</span><span class="n">off_scene_model</span><span class="p">,</span><span class="w"> </span><span class="n">modelStyle</span><span class="p">.</span><span class="n">r</span><span class="p">,</span><span class="w"> </span><span class="n">modelStyle</span><span class="p">.</span><span class="n">g</span><span class="p">,</span><span class="w"> </span><span class="n">modelStyle</span><span class="p">.</span><span class="n">b</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">viewer</span><span class="p">.</span><span class="n">addPointCloud</span><span class="w"> </span><span class="p">(</span><span class="n">off_scene_model</span><span class="p">,</span><span class="w"> </span><span class="n">off_scene_model_color_handler</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;off_scene_model&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">viewer</span><span class="p">.</span><span class="n">setPointCloudRenderingProperties</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCL_VISUALIZER_POINT_SIZE</span><span class="p">,</span><span class="w"> </span><span class="n">modelStyle</span><span class="p">.</span><span class="n">size</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;off_scene_model&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">show_keypoints_</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">CloudStyle</span><span class="w"> </span><span class="n">goodKeypointStyle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">style_violet</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PointCloudColorHandlerCustom</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;</span><span class="w"> </span><span class="n">model_good_keypoints_color_handler</span><span class="w"> </span><span class="p">(</span><span class="n">off_model_good_kp</span><span class="p">,</span><span class="w"> </span><span class="n">goodKeypointStyle</span><span class="p">.</span><span class="n">r</span><span class="p">,</span><span class="w"> </span><span class="n">goodKeypointStyle</span><span class="p">.</span><span class="n">g</span><span class="p">,</span><span class="w"></span>
<span class="w">                                                                                                    </span><span class="n">goodKeypointStyle</span><span class="p">.</span><span class="n">b</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">viewer</span><span class="p">.</span><span class="n">addPointCloud</span><span class="w"> </span><span class="p">(</span><span class="n">off_model_good_kp</span><span class="p">,</span><span class="w"> </span><span class="n">model_good_keypoints_color_handler</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;model_good_keypoints&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">viewer</span><span class="p">.</span><span class="n">setPointCloudRenderingProperties</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCL_VISUALIZER_POINT_SIZE</span><span class="p">,</span><span class="w"> </span><span class="n">goodKeypointStyle</span><span class="p">.</span><span class="n">size</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;model_good_keypoints&quot;</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PointCloudColorHandlerCustom</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;</span><span class="w"> </span><span class="n">scene_good_keypoints_color_handler</span><span class="w"> </span><span class="p">(</span><span class="n">scene_good_kp</span><span class="p">,</span><span class="w"> </span><span class="n">goodKeypointStyle</span><span class="p">.</span><span class="n">r</span><span class="p">,</span><span class="w"> </span><span class="n">goodKeypointStyle</span><span class="p">.</span><span class="n">g</span><span class="p">,</span><span class="w"></span>
<span class="w">                                                                                                    </span><span class="n">goodKeypointStyle</span><span class="p">.</span><span class="n">b</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">viewer</span><span class="p">.</span><span class="n">addPointCloud</span><span class="w"> </span><span class="p">(</span><span class="n">scene_good_kp</span><span class="p">,</span><span class="w"> </span><span class="n">scene_good_keypoints_color_handler</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;scene_good_keypoints&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">viewer</span><span class="p">.</span><span class="n">setPointCloudRenderingProperties</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCL_VISUALIZER_POINT_SIZE</span><span class="p">,</span><span class="w"> </span><span class="n">goodKeypointStyle</span><span class="p">.</span><span class="n">size</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;scene_good_keypoints&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">instances</span><span class="p">.</span><span class="n">size</span><span class="w"> </span><span class="p">();</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">stringstream</span><span class="w"> </span><span class="n">ss_instance</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">ss_instance</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;instance_&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">i</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">CloudStyle</span><span class="w"> </span><span class="n">clusterStyle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">style_red</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PointCloudColorHandlerCustom</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;</span><span class="w"> </span><span class="n">instance_color_handler</span><span class="w"> </span><span class="p">(</span><span class="n">instances</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">clusterStyle</span><span class="p">.</span><span class="n">r</span><span class="p">,</span><span class="w"> </span><span class="n">clusterStyle</span><span class="p">.</span><span class="n">g</span><span class="p">,</span><span class="w"> </span><span class="n">clusterStyle</span><span class="p">.</span><span class="n">b</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">viewer</span><span class="p">.</span><span class="n">addPointCloud</span><span class="w"> </span><span class="p">(</span><span class="n">instances</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">instance_color_handler</span><span class="p">,</span><span class="w"> </span><span class="n">ss_instance</span><span class="p">.</span><span class="n">str</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="w">    </span><span class="n">viewer</span><span class="p">.</span><span class="n">setPointCloudRenderingProperties</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCL_VISUALIZER_POINT_SIZE</span><span class="p">,</span><span class="w"> </span><span class="n">clusterStyle</span><span class="p">.</span><span class="n">size</span><span class="p">,</span><span class="w"> </span><span class="n">ss_instance</span><span class="p">.</span><span class="n">str</span><span class="w"> </span><span class="p">());</span><span class="w"></span>

<span class="w">    </span><span class="n">CloudStyle</span><span class="w"> </span><span class="n">registeredStyles</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hypotheses_mask</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">style_green</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">style_cyan</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">ss_instance</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;_registered&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PointCloudColorHandlerCustom</span><span class="o">&lt;</span><span class="n">PointType</span><span class="o">&gt;</span><span class="w"> </span><span class="n">registered_instance_color_handler</span><span class="w"> </span><span class="p">(</span><span class="n">registered_instances</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">registeredStyles</span><span class="p">.</span><span class="n">r</span><span class="p">,</span><span class="w"></span>
<span class="w">                                                                                                   </span><span class="n">registeredStyles</span><span class="p">.</span><span class="n">g</span><span class="p">,</span><span class="w"> </span><span class="n">registeredStyles</span><span class="p">.</span><span class="n">b</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">viewer</span><span class="p">.</span><span class="n">addPointCloud</span><span class="w"> </span><span class="p">(</span><span class="n">registered_instances</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">registered_instance_color_handler</span><span class="p">,</span><span class="w"> </span><span class="n">ss_instance</span><span class="p">.</span><span class="n">str</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="w">    </span><span class="n">viewer</span><span class="p">.</span><span class="n">setPointCloudRenderingProperties</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCL_VISUALIZER_POINT_SIZE</span><span class="p">,</span><span class="w"> </span><span class="n">registeredStyles</span><span class="p">.</span><span class="n">size</span><span class="p">,</span><span class="w"> </span><span class="n">ss_instance</span><span class="p">.</span><span class="n">str</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">viewer</span><span class="p">.</span><span class="n">wasStopped</span><span class="w"> </span><span class="p">())</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">viewer</span><span class="p">.</span><span class="n">spinOnce</span><span class="w"> </span><span class="p">();</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
</section>
<section id="compiling-and-running-the-program">
<h1>Compiling and running the program</h1>
<p>Create a <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> file and add the following lines into it:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span><span class="w"> </span><span class="s">3.5</span><span class="w"> </span><span class="s">FATAL_ERROR</span><span class="p">)</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="nb">project</span><span class="p">(</span><span class="s">global_hypothesis_verification</span><span class="p">)</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="c">#Pcl</span>
<span class="linenos"> 6</span><span class="nb">find_package</span><span class="p">(</span><span class="s">PCL</span><span class="w"> </span><span class="s">1.7</span><span class="w"> </span><span class="s">REQUIRED</span><span class="p">)</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="nb">include_directories</span><span class="p">(</span><span class="o">${</span><span class="nv">PCL_INCLUDE_DIRS</span><span class="o">}</span><span class="p">)</span>
<span class="linenos"> 9</span><span class="nb">link_directories</span><span class="p">(</span><span class="o">${</span><span class="nv">PCL_LIBRARY_DIRS</span><span class="o">}</span><span class="p">)</span>
<span class="linenos">10</span><span class="nb">add_definitions</span><span class="p">(</span><span class="o">${</span><span class="nv">PCL_DEFINITIONS</span><span class="o">}</span><span class="p">)</span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="nb">add_executable</span> <span class="p">(</span><span class="s">global_hypothesis_verification</span><span class="w"> </span><span class="s">global_hypothesis_verification.cpp</span><span class="p">)</span>
<span class="linenos">13</span><span class="nb">target_link_libraries</span> <span class="p">(</span><span class="s">global_hypothesis_verification</span><span class="w"> </span><span class="o">${</span><span class="nv">PCL_LIBRARIES</span><span class="o">}</span><span class="p">)</span>
</pre></div>
</div>
<p>After you have created the executable, you can then launch it following this example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="o">./</span><span class="n">global_hypothesis_verification</span> <span class="n">milk</span><span class="o">.</span><span class="n">pcd</span> <span class="n">milk_cartoon_all_small_clorox</span><span class="o">.</span><span class="n">pcd</span>
</pre></div>
</div>
<figure class="align-default">
<img alt="Original Scene Image" src="_images/original.png" />
</figure>
<p>Original Scene Image</p>
<figure class="align-default" id="id1">
<img alt="_images/single.png" src="_images/single.png" />
<figcaption>
<p><span class="caption-text">Valid Hypothesis (Green) with simple parameters</span></p>
</figcaption>
</figure>
<p>You can simulate more false positives by using a larger bin size parameter for the Hough Voting Correspondence Grouping algorithm:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="o">./</span><span class="n">global_hypothesis_verification</span> <span class="n">milk</span><span class="o">.</span><span class="n">pcd</span> <span class="n">milk_cartoon_all_small_clorox</span><span class="o">.</span><span class="n">pcd</span> <span class="o">--</span><span class="n">cg_size</span> <span class="mf">0.035</span>
</pre></div>
</div>
<figure class="align-default" id="id2">
<img alt="_images/multiple.png" src="_images/multiple.png" />
<figcaption>
<p><span class="caption-text">Valid Hypothesis (Green) among 9 false positives</span></p>
</figcaption>
</figure>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright .</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>