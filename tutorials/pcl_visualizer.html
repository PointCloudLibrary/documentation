<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PCLVisualizer &mdash; Point Cloud Library 1.14.1-dev documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Point Cloud Library
          </a>
              <div class="version">
                1.14.1-dev
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">PCLVisualizer</a><ul>
<li><a class="reference internal" href="#compiling-and-running-the-program">Compiling and running the program</a></li>
</ul>
</li>
<li><a class="reference internal" href="#visualising-a-single-cloud">Visualising a single cloud</a><ul>
<li><a class="reference internal" href="#explanation">Explanation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#adding-some-colour">Adding some colour</a><ul>
<li><a class="reference internal" href="#rgb-point-clouds">RGB point clouds</a></li>
<li><a class="reference internal" href="#id1">Explanation</a></li>
<li><a class="reference internal" href="#custom-colours">Custom colours</a></li>
<li><a class="reference internal" href="#id2">Explanation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#normals-and-other-information">Normals and other information</a><ul>
<li><a class="reference internal" href="#id3">Explanation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#drawing-shapes">Drawing Shapes</a><ul>
<li><a class="reference internal" href="#id4">Explanation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#multiple-viewports">Multiple viewports</a><ul>
<li><a class="reference internal" href="#id5">Explanation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#interaction-customization">Interaction Customization</a><ul>
<li><a class="reference internal" href="#id6">Explanation</a></li>
</ul>
</li>
</ul>
</div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Point Cloud Library</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>PCLVisualizer</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="pclvisualizer">
<span id="pcl-visualizer"></span><h1>PCLVisualizer</h1>
<p>PCLVisualizer is PCLâ€™s full-featured visualisation class. While more
complex to use than the CloudViewer, it is also more powerful, offering
features such as displaying normals, drawing shapes and multiple
viewports.</p>
<p>This tutorial will use a code sample to illustrate some of the features
of PCLVisualizer, beginning with displaying a single point cloud. Most
of the code sample is boilerplate to set up the point clouds that will
be visualised. The relevant code for each sample is contained in a
function specific to that sample. The code is shown below. Copy it into
a file named <code class="docutils literal notranslate"><span class="pre">pcl_visualizer_demo.cpp</span></code>.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="linenos">  1</span><span class="cm">/* \author Geoffrey Biggs */</span><span class="w"></span>
<span class="linenos">  2</span>
<span class="linenos">  3</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="linenos">  4</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;thread&gt;</span><span class="cp"></span>
<span class="linenos">  5</span>
<span class="linenos">  6</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;pcl/common/angles.h&gt;</span><span class="c1"> // for pcl::deg2rad</span><span class="cp"></span>
<span class="linenos">  7</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;pcl/features/normal_3d.h&gt;</span><span class="cp"></span>
<span class="linenos">  8</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;pcl/io/pcd_io.h&gt;</span><span class="cp"></span>
<span class="linenos">  9</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;pcl/visualization/pcl_visualizer.h&gt;</span><span class="cp"></span>
<span class="linenos"> 10</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;pcl/console/parse.h&gt;</span><span class="cp"></span>
<span class="linenos"> 11</span>
<span class="linenos"> 12</span><span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">std</span><span class="o">::</span><span class="nn">chrono_literals</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 13</span>
<span class="linenos"> 14</span><span class="c1">// --------------</span>
<span class="linenos"> 15</span><span class="c1">// -----Help-----</span>
<span class="linenos"> 16</span><span class="c1">// --------------</span>
<span class="linenos"> 17</span><span class="kt">void</span><span class="w"></span>
<span class="linenos"> 18</span><span class="nf">printUsage</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">progName</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 19</span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 20</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\n\n</span><span class="s">Usage: &quot;</span><span class="o">&lt;&lt;</span><span class="n">progName</span><span class="o">&lt;&lt;</span><span class="s">&quot; [options]</span><span class="se">\n\n</span><span class="s">&quot;</span><span class="w"></span>
<span class="linenos"> 21</span><span class="w">            </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Options:</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"></span>
<span class="linenos"> 22</span><span class="w">            </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;-------------------------------------------</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"></span>
<span class="linenos"> 23</span><span class="w">            </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;-h           this help</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"></span>
<span class="linenos"> 24</span><span class="w">            </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;-s           Simple visualisation example</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"></span>
<span class="linenos"> 25</span><span class="w">            </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;-r           RGB colour visualisation example</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"></span>
<span class="linenos"> 26</span><span class="w">            </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;-c           Custom colour visualisation example</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"></span>
<span class="linenos"> 27</span><span class="w">            </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;-n           Normals visualisation example</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"></span>
<span class="linenos"> 28</span><span class="w">            </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;-a           Shapes visualisation example</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"></span>
<span class="linenos"> 29</span><span class="w">            </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;-v           Viewports example</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"></span>
<span class="linenos"> 30</span><span class="w">            </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;-i           Interaction Customization example</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"></span>
<span class="linenos"> 31</span><span class="w">            </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\n\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 32</span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 33</span>
<span class="linenos"> 34</span>
<span class="linenos"> 35</span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="o">::</span><span class="n">Ptr</span><span class="w"> </span><span class="nf">simpleVis</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZ</span><span class="o">&gt;::</span><span class="n">ConstPtr</span><span class="w"> </span><span class="n">cloud</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 36</span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 37</span><span class="w">  </span><span class="c1">// --------------------------------------------</span>
<span class="linenos"> 38</span><span class="w">  </span><span class="c1">// -----Open 3D viewer and add point cloud-----</span>
<span class="linenos"> 39</span><span class="w">  </span><span class="c1">// --------------------------------------------</span>
<span class="linenos"> 40</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="o">::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">viewer</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;3D Viewer&quot;</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 41</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">setBackgroundColor</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 42</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addPointCloud</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZ</span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">cloud</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sample cloud&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 43</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">setPointCloudRenderingProperties</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCL_VISUALIZER_POINT_SIZE</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sample cloud&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 44</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addCoordinateSystem</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 45</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">initCameraParameters</span><span class="w"> </span><span class="p">();</span><span class="w"></span>
<span class="linenos"> 46</span><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">viewer</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 47</span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 48</span>
<span class="linenos"> 49</span>
<span class="linenos"> 50</span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="o">::</span><span class="n">Ptr</span><span class="w"> </span><span class="nf">rgbVis</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZRGB</span><span class="o">&gt;::</span><span class="n">ConstPtr</span><span class="w"> </span><span class="n">cloud</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 51</span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 52</span><span class="w">  </span><span class="c1">// --------------------------------------------</span>
<span class="linenos"> 53</span><span class="w">  </span><span class="c1">// -----Open 3D viewer and add point cloud-----</span>
<span class="linenos"> 54</span><span class="w">  </span><span class="c1">// --------------------------------------------</span>
<span class="linenos"> 55</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="o">::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">viewer</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;3D Viewer&quot;</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 56</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">setBackgroundColor</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 57</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PointCloudColorHandlerRGBField</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZRGB</span><span class="o">&gt;</span><span class="w"> </span><span class="n">rgb</span><span class="p">(</span><span class="n">cloud</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 58</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addPointCloud</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZRGB</span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">cloud</span><span class="p">,</span><span class="w"> </span><span class="n">rgb</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sample cloud&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 59</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">setPointCloudRenderingProperties</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCL_VISUALIZER_POINT_SIZE</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sample cloud&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 60</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addCoordinateSystem</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 61</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">initCameraParameters</span><span class="w"> </span><span class="p">();</span><span class="w"></span>
<span class="linenos"> 62</span><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">viewer</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 63</span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 64</span>
<span class="linenos"> 65</span>
<span class="linenos"> 66</span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="o">::</span><span class="n">Ptr</span><span class="w"> </span><span class="nf">customColourVis</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZ</span><span class="o">&gt;::</span><span class="n">ConstPtr</span><span class="w"> </span><span class="n">cloud</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 67</span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 68</span><span class="w">  </span><span class="c1">// --------------------------------------------</span>
<span class="linenos"> 69</span><span class="w">  </span><span class="c1">// -----Open 3D viewer and add point cloud-----</span>
<span class="linenos"> 70</span><span class="w">  </span><span class="c1">// --------------------------------------------</span>
<span class="linenos"> 71</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="o">::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">viewer</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;3D Viewer&quot;</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 72</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">setBackgroundColor</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 73</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PointCloudColorHandlerCustom</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZ</span><span class="o">&gt;</span><span class="w"> </span><span class="n">single_color</span><span class="p">(</span><span class="n">cloud</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">255</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 74</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addPointCloud</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZ</span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">cloud</span><span class="p">,</span><span class="w"> </span><span class="n">single_color</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sample cloud&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 75</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">setPointCloudRenderingProperties</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCL_VISUALIZER_POINT_SIZE</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sample cloud&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 76</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addCoordinateSystem</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 77</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">initCameraParameters</span><span class="w"> </span><span class="p">();</span><span class="w"></span>
<span class="linenos"> 78</span><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">viewer</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 79</span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 80</span>
<span class="linenos"> 81</span>
<span class="linenos"> 82</span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="o">::</span><span class="n">Ptr</span><span class="w"> </span><span class="nf">normalsVis</span><span class="w"> </span><span class="p">(</span><span class="w"></span>
<span class="linenos"> 83</span><span class="w">    </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZRGB</span><span class="o">&gt;::</span><span class="n">ConstPtr</span><span class="w"> </span><span class="n">cloud</span><span class="p">,</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">Normal</span><span class="o">&gt;::</span><span class="n">ConstPtr</span><span class="w"> </span><span class="n">normals</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 84</span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 85</span><span class="w">  </span><span class="c1">// --------------------------------------------------------</span>
<span class="linenos"> 86</span><span class="w">  </span><span class="c1">// -----Open 3D viewer and add point cloud and normals-----</span>
<span class="linenos"> 87</span><span class="w">  </span><span class="c1">// --------------------------------------------------------</span>
<span class="linenos"> 88</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="o">::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">viewer</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;3D Viewer&quot;</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 89</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">setBackgroundColor</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 90</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PointCloudColorHandlerRGBField</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZRGB</span><span class="o">&gt;</span><span class="w"> </span><span class="n">rgb</span><span class="p">(</span><span class="n">cloud</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 91</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addPointCloud</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZRGB</span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">cloud</span><span class="p">,</span><span class="w"> </span><span class="n">rgb</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sample cloud&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 92</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">setPointCloudRenderingProperties</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCL_VISUALIZER_POINT_SIZE</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sample cloud&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 93</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addPointCloudNormals</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZRGB</span><span class="p">,</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">Normal</span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">cloud</span><span class="p">,</span><span class="w"> </span><span class="n">normals</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mf">0.05</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;normals&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 94</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addCoordinateSystem</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 95</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">initCameraParameters</span><span class="w"> </span><span class="p">();</span><span class="w"></span>
<span class="linenos"> 96</span><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">viewer</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 97</span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 98</span>
<span class="linenos"> 99</span>
<span class="linenos">100</span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="o">::</span><span class="n">Ptr</span><span class="w"> </span><span class="nf">shapesVis</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZRGB</span><span class="o">&gt;::</span><span class="n">ConstPtr</span><span class="w"> </span><span class="n">cloud</span><span class="p">)</span><span class="w"></span>
<span class="linenos">101</span><span class="p">{</span><span class="w"></span>
<span class="linenos">102</span><span class="w">  </span><span class="c1">// --------------------------------------------</span>
<span class="linenos">103</span><span class="w">  </span><span class="c1">// -----Open 3D viewer and add point cloud-----</span>
<span class="linenos">104</span><span class="w">  </span><span class="c1">// --------------------------------------------</span>
<span class="linenos">105</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="o">::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">viewer</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;3D Viewer&quot;</span><span class="p">));</span><span class="w"></span>
<span class="linenos">106</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">setBackgroundColor</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="linenos">107</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PointCloudColorHandlerRGBField</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZRGB</span><span class="o">&gt;</span><span class="w"> </span><span class="n">rgb</span><span class="p">(</span><span class="n">cloud</span><span class="p">);</span><span class="w"></span>
<span class="linenos">108</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addPointCloud</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZRGB</span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">cloud</span><span class="p">,</span><span class="w"> </span><span class="n">rgb</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sample cloud&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">109</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">setPointCloudRenderingProperties</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCL_VISUALIZER_POINT_SIZE</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sample cloud&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">110</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addCoordinateSystem</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="p">);</span><span class="w"></span>
<span class="linenos">111</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">initCameraParameters</span><span class="w"> </span><span class="p">();</span><span class="w"></span>
<span class="linenos">112</span>
<span class="linenos">113</span><span class="w">  </span><span class="c1">//------------------------------------</span>
<span class="linenos">114</span><span class="w">  </span><span class="c1">//-----Add shapes at cloud points-----</span>
<span class="linenos">115</span><span class="w">  </span><span class="c1">//------------------------------------</span>
<span class="linenos">116</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addLine</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZRGB</span><span class="o">&gt;</span><span class="w"> </span><span class="p">((</span><span class="o">*</span><span class="n">cloud</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span><span class="w"></span>
<span class="linenos">117</span><span class="w">                                     </span><span class="p">(</span><span class="o">*</span><span class="n">cloud</span><span class="p">)[</span><span class="n">cloud</span><span class="o">-&gt;</span><span class="n">size</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">],</span><span class="w"> </span><span class="s">&quot;line&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">118</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addSphere</span><span class="w"> </span><span class="p">((</span><span class="o">*</span><span class="n">cloud</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="mf">0.2</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sphere&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">119</span>
<span class="linenos">120</span><span class="w">  </span><span class="c1">//---------------------------------------</span>
<span class="linenos">121</span><span class="w">  </span><span class="c1">//-----Add shapes at other locations-----</span>
<span class="linenos">122</span><span class="w">  </span><span class="c1">//---------------------------------------</span>
<span class="linenos">123</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">ModelCoefficients</span><span class="w"> </span><span class="n">coeffs</span><span class="p">;</span><span class="w"></span>
<span class="linenos">124</span><span class="w">  </span><span class="n">coeffs</span><span class="p">.</span><span class="n">values</span><span class="p">.</span><span class="n">push_back</span><span class="w"> </span><span class="p">(</span><span class="mf">0.0</span><span class="p">);</span><span class="w"></span>
<span class="linenos">125</span><span class="w">  </span><span class="n">coeffs</span><span class="p">.</span><span class="n">values</span><span class="p">.</span><span class="n">push_back</span><span class="w"> </span><span class="p">(</span><span class="mf">0.0</span><span class="p">);</span><span class="w"></span>
<span class="linenos">126</span><span class="w">  </span><span class="n">coeffs</span><span class="p">.</span><span class="n">values</span><span class="p">.</span><span class="n">push_back</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="p">);</span><span class="w"></span>
<span class="linenos">127</span><span class="w">  </span><span class="n">coeffs</span><span class="p">.</span><span class="n">values</span><span class="p">.</span><span class="n">push_back</span><span class="w"> </span><span class="p">(</span><span class="mf">0.0</span><span class="p">);</span><span class="w"></span>
<span class="linenos">128</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addPlane</span><span class="w"> </span><span class="p">(</span><span class="n">coeffs</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;plane&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">129</span><span class="w">  </span><span class="n">coeffs</span><span class="p">.</span><span class="n">values</span><span class="p">.</span><span class="n">clear</span><span class="w"> </span><span class="p">();</span><span class="w"></span>
<span class="linenos">130</span><span class="w">  </span><span class="n">coeffs</span><span class="p">.</span><span class="n">values</span><span class="p">.</span><span class="n">push_back</span><span class="w"> </span><span class="p">(</span><span class="mf">0.3</span><span class="p">);</span><span class="w"></span>
<span class="linenos">131</span><span class="w">  </span><span class="n">coeffs</span><span class="p">.</span><span class="n">values</span><span class="p">.</span><span class="n">push_back</span><span class="w"> </span><span class="p">(</span><span class="mf">0.3</span><span class="p">);</span><span class="w"></span>
<span class="linenos">132</span><span class="w">  </span><span class="n">coeffs</span><span class="p">.</span><span class="n">values</span><span class="p">.</span><span class="n">push_back</span><span class="w"> </span><span class="p">(</span><span class="mf">0.0</span><span class="p">);</span><span class="w"></span>
<span class="linenos">133</span><span class="w">  </span><span class="n">coeffs</span><span class="p">.</span><span class="n">values</span><span class="p">.</span><span class="n">push_back</span><span class="w"> </span><span class="p">(</span><span class="mf">0.0</span><span class="p">);</span><span class="w"></span>
<span class="linenos">134</span><span class="w">  </span><span class="n">coeffs</span><span class="p">.</span><span class="n">values</span><span class="p">.</span><span class="n">push_back</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="p">);</span><span class="w"></span>
<span class="linenos">135</span><span class="w">  </span><span class="n">coeffs</span><span class="p">.</span><span class="n">values</span><span class="p">.</span><span class="n">push_back</span><span class="w"> </span><span class="p">(</span><span class="mf">0.0</span><span class="p">);</span><span class="w"></span>
<span class="linenos">136</span><span class="w">  </span><span class="n">coeffs</span><span class="p">.</span><span class="n">values</span><span class="p">.</span><span class="n">push_back</span><span class="w"> </span><span class="p">(</span><span class="mf">5.0</span><span class="p">);</span><span class="w"></span>
<span class="linenos">137</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addCone</span><span class="w"> </span><span class="p">(</span><span class="n">coeffs</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;cone&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">138</span>
<span class="linenos">139</span><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">viewer</span><span class="p">);</span><span class="w"></span>
<span class="linenos">140</span><span class="p">}</span><span class="w"></span>
<span class="linenos">141</span>
<span class="linenos">142</span>
<span class="linenos">143</span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="o">::</span><span class="n">Ptr</span><span class="w"> </span><span class="nf">viewportsVis</span><span class="w"> </span><span class="p">(</span><span class="w"></span>
<span class="linenos">144</span><span class="w">    </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZRGB</span><span class="o">&gt;::</span><span class="n">ConstPtr</span><span class="w"> </span><span class="n">cloud</span><span class="p">,</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">Normal</span><span class="o">&gt;::</span><span class="n">ConstPtr</span><span class="w"> </span><span class="n">normals1</span><span class="p">,</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">Normal</span><span class="o">&gt;::</span><span class="n">ConstPtr</span><span class="w"> </span><span class="n">normals2</span><span class="p">)</span><span class="w"></span>
<span class="linenos">145</span><span class="p">{</span><span class="w"></span>
<span class="linenos">146</span><span class="w">  </span><span class="c1">// --------------------------------------------------------</span>
<span class="linenos">147</span><span class="w">  </span><span class="c1">// -----Open 3D viewer and add point cloud and normals-----</span>
<span class="linenos">148</span><span class="w">  </span><span class="c1">// --------------------------------------------------------</span>
<span class="linenos">149</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="o">::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">viewer</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;3D Viewer&quot;</span><span class="p">));</span><span class="w"></span>
<span class="linenos">150</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">initCameraParameters</span><span class="w"> </span><span class="p">();</span><span class="w"></span>
<span class="linenos">151</span>
<span class="linenos">152</span><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">v1</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="linenos">153</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">createViewPort</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="n">v1</span><span class="p">);</span><span class="w"></span>
<span class="linenos">154</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">setBackgroundColor</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">v1</span><span class="p">);</span><span class="w"></span>
<span class="linenos">155</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addText</span><span class="p">(</span><span class="s">&quot;Radius: 0.01&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;v1 text&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">v1</span><span class="p">);</span><span class="w"></span>
<span class="linenos">156</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PointCloudColorHandlerRGBField</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZRGB</span><span class="o">&gt;</span><span class="w"> </span><span class="n">rgb</span><span class="p">(</span><span class="n">cloud</span><span class="p">);</span><span class="w"></span>
<span class="linenos">157</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addPointCloud</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZRGB</span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">cloud</span><span class="p">,</span><span class="w"> </span><span class="n">rgb</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sample cloud1&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">v1</span><span class="p">);</span><span class="w"></span>
<span class="linenos">158</span>
<span class="linenos">159</span><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">v2</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="linenos">160</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">createViewPort</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="p">);</span><span class="w"></span>
<span class="linenos">161</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">setBackgroundColor</span><span class="w"> </span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="p">);</span><span class="w"></span>
<span class="linenos">162</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addText</span><span class="p">(</span><span class="s">&quot;Radius: 0.1&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;v2 text&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="p">);</span><span class="w"></span>
<span class="linenos">163</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PointCloudColorHandlerCustom</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZRGB</span><span class="o">&gt;</span><span class="w"> </span><span class="n">single_color</span><span class="p">(</span><span class="n">cloud</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">255</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="linenos">164</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addPointCloud</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZRGB</span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">cloud</span><span class="p">,</span><span class="w"> </span><span class="n">single_color</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sample cloud2&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="p">);</span><span class="w"></span>
<span class="linenos">165</span>
<span class="linenos">166</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">setPointCloudRenderingProperties</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCL_VISUALIZER_POINT_SIZE</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sample cloud1&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">167</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">setPointCloudRenderingProperties</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCL_VISUALIZER_POINT_SIZE</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sample cloud2&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">168</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addCoordinateSystem</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="p">);</span><span class="w"></span>
<span class="linenos">169</span>
<span class="linenos">170</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addPointCloudNormals</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZRGB</span><span class="p">,</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">Normal</span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">cloud</span><span class="p">,</span><span class="w"> </span><span class="n">normals1</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mf">0.05</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;normals1&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">v1</span><span class="p">);</span><span class="w"></span>
<span class="linenos">171</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addPointCloudNormals</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZRGB</span><span class="p">,</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">Normal</span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">cloud</span><span class="p">,</span><span class="w"> </span><span class="n">normals2</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mf">0.05</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;normals2&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="p">);</span><span class="w"></span>
<span class="linenos">172</span>
<span class="linenos">173</span><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">viewer</span><span class="p">);</span><span class="w"></span>
<span class="linenos">174</span><span class="p">}</span><span class="w"></span>
<span class="linenos">175</span>
<span class="linenos">176</span>
<span class="linenos">177</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">text_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="linenos">178</span><span class="kt">void</span><span class="w"> </span><span class="nf">keyboardEventOccurred</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">KeyboardEvent</span><span class="w"> </span><span class="o">&amp;</span><span class="n">event</span><span class="p">,</span><span class="w"></span>
<span class="linenos">179</span><span class="w">                            </span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">viewer_void</span><span class="p">)</span><span class="w"></span>
<span class="linenos">180</span><span class="p">{</span><span class="w"></span>
<span class="linenos">181</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="w"> </span><span class="o">*</span><span class="n">viewer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="w"> </span><span class="o">*&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">viewer_void</span><span class="p">);</span><span class="w"></span>
<span class="linenos">182</span><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="n">getKeySym</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;r&quot;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">event</span><span class="p">.</span><span class="n">keyDown</span><span class="w"> </span><span class="p">())</span><span class="w"></span>
<span class="linenos">183</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">184</span><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;r was pressed =&gt; removing all text&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">185</span>
<span class="linenos">186</span><span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">str</span><span class="p">[</span><span class="mi">512</span><span class="p">];</span><span class="w"></span>
<span class="linenos">187</span><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">text_id</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"></span>
<span class="linenos">188</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">189</span><span class="w">      </span><span class="n">sprintf</span><span class="w"> </span><span class="p">(</span><span class="n">str</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;text#%03d&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">);</span><span class="w"></span>
<span class="linenos">190</span><span class="w">      </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">removeShape</span><span class="w"> </span><span class="p">(</span><span class="n">str</span><span class="p">);</span><span class="w"></span>
<span class="linenos">191</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">192</span><span class="w">    </span><span class="n">text_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="linenos">193</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">194</span><span class="p">}</span><span class="w"></span>
<span class="linenos">195</span>
<span class="linenos">196</span><span class="kt">void</span><span class="w"> </span><span class="nf">mouseEventOccurred</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">MouseEvent</span><span class="w"> </span><span class="o">&amp;</span><span class="n">event</span><span class="p">,</span><span class="w"></span>
<span class="linenos">197</span><span class="w">                         </span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">viewer_void</span><span class="p">)</span><span class="w"></span>
<span class="linenos">198</span><span class="p">{</span><span class="w"></span>
<span class="linenos">199</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="w"> </span><span class="o">*</span><span class="n">viewer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="w"> </span><span class="o">*&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">viewer_void</span><span class="p">);</span><span class="w"></span>
<span class="linenos">200</span><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="n">getButton</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">MouseEvent</span><span class="o">::</span><span class="n">LeftButton</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"></span>
<span class="linenos">201</span><span class="w">      </span><span class="n">event</span><span class="p">.</span><span class="n">getType</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">MouseEvent</span><span class="o">::</span><span class="n">MouseButtonRelease</span><span class="p">)</span><span class="w"></span>
<span class="linenos">202</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">203</span><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Left mouse button released at position (&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">event</span><span class="p">.</span><span class="n">getX</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;, &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">event</span><span class="p">.</span><span class="n">getY</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;)&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">204</span>
<span class="linenos">205</span><span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">str</span><span class="p">[</span><span class="mi">512</span><span class="p">];</span><span class="w"></span>
<span class="linenos">206</span><span class="w">    </span><span class="n">sprintf</span><span class="w"> </span><span class="p">(</span><span class="n">str</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;text#%03d&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">text_id</span><span class="w"> </span><span class="o">++</span><span class="p">);</span><span class="w"></span>
<span class="linenos">207</span><span class="w">    </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addText</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;clicked here&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">event</span><span class="p">.</span><span class="n">getX</span><span class="w"> </span><span class="p">(),</span><span class="w"> </span><span class="n">event</span><span class="p">.</span><span class="n">getY</span><span class="w"> </span><span class="p">(),</span><span class="w"> </span><span class="n">str</span><span class="p">);</span><span class="w"></span>
<span class="linenos">208</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">209</span><span class="p">}</span><span class="w"></span>
<span class="linenos">210</span>
<span class="linenos">211</span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="o">::</span><span class="n">Ptr</span><span class="w"> </span><span class="nf">interactionCustomizationVis</span><span class="w"> </span><span class="p">()</span><span class="w"></span>
<span class="linenos">212</span><span class="p">{</span><span class="w"></span>
<span class="linenos">213</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="o">::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">viewer</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;3D Viewer&quot;</span><span class="p">));</span><span class="w"></span>
<span class="linenos">214</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">setBackgroundColor</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="linenos">215</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addCoordinateSystem</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="p">);</span><span class="w"></span>
<span class="linenos">216</span>
<span class="linenos">217</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">registerKeyboardCallback</span><span class="w"> </span><span class="p">(</span><span class="n">keyboardEventOccurred</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="n">viewer</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="linenos">218</span><span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">registerMouseCallback</span><span class="w"> </span><span class="p">(</span><span class="n">mouseEventOccurred</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="n">viewer</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="linenos">219</span>
<span class="linenos">220</span><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">viewer</span><span class="p">);</span><span class="w"></span>
<span class="linenos">221</span><span class="p">}</span><span class="w"></span>
<span class="linenos">222</span>
<span class="linenos">223</span>
<span class="linenos">224</span><span class="c1">// --------------</span>
<span class="linenos">225</span><span class="c1">// -----Main-----</span>
<span class="linenos">226</span><span class="c1">// --------------</span>
<span class="linenos">227</span><span class="kt">int</span><span class="w"></span>
<span class="linenos">228</span><span class="nf">main</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="o">**</span><span class="w"> </span><span class="n">argv</span><span class="p">)</span><span class="w"></span>
<span class="linenos">229</span><span class="p">{</span><span class="w"></span>
<span class="linenos">230</span><span class="w">  </span><span class="c1">// --------------------------------------</span>
<span class="linenos">231</span><span class="w">  </span><span class="c1">// -----Parse Command Line Arguments-----</span>
<span class="linenos">232</span><span class="w">  </span><span class="c1">// --------------------------------------</span>
<span class="linenos">233</span><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">console</span><span class="o">::</span><span class="n">find_argument</span><span class="w"> </span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;-h&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"></span>
<span class="linenos">234</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">235</span><span class="w">    </span><span class="n">printUsage</span><span class="w"> </span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span><span class="w"></span>
<span class="linenos">236</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="linenos">237</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">238</span><span class="w">  </span><span class="kt">bool</span><span class="w"> </span><span class="n">simple</span><span class="p">(</span><span class="nb">false</span><span class="p">),</span><span class="w"> </span><span class="n">rgb</span><span class="p">(</span><span class="nb">false</span><span class="p">),</span><span class="w"> </span><span class="n">custom_c</span><span class="p">(</span><span class="nb">false</span><span class="p">),</span><span class="w"> </span><span class="n">normals</span><span class="p">(</span><span class="nb">false</span><span class="p">),</span><span class="w"></span>
<span class="linenos">239</span><span class="w">    </span><span class="n">shapes</span><span class="p">(</span><span class="nb">false</span><span class="p">),</span><span class="w"> </span><span class="n">viewports</span><span class="p">(</span><span class="nb">false</span><span class="p">),</span><span class="w"> </span><span class="n">interaction_customization</span><span class="p">(</span><span class="nb">false</span><span class="p">);</span><span class="w"></span>
<span class="linenos">240</span><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">console</span><span class="o">::</span><span class="n">find_argument</span><span class="w"> </span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;-s&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"></span>
<span class="linenos">241</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">242</span><span class="w">    </span><span class="n">simple</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"></span>
<span class="linenos">243</span><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Simple visualisation example</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"></span>
<span class="linenos">244</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">245</span><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">console</span><span class="o">::</span><span class="n">find_argument</span><span class="w"> </span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;-c&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"></span>
<span class="linenos">246</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">247</span><span class="w">    </span><span class="n">custom_c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"></span>
<span class="linenos">248</span><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Custom colour visualisation example</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"></span>
<span class="linenos">249</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">250</span><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">console</span><span class="o">::</span><span class="n">find_argument</span><span class="w"> </span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;-r&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"></span>
<span class="linenos">251</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">252</span><span class="w">    </span><span class="n">rgb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"></span>
<span class="linenos">253</span><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;RGB colour visualisation example</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"></span>
<span class="linenos">254</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">255</span><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">console</span><span class="o">::</span><span class="n">find_argument</span><span class="w"> </span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;-n&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"></span>
<span class="linenos">256</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">257</span><span class="w">    </span><span class="n">normals</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"></span>
<span class="linenos">258</span><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Normals visualisation example</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"></span>
<span class="linenos">259</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">260</span><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">console</span><span class="o">::</span><span class="n">find_argument</span><span class="w"> </span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;-a&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"></span>
<span class="linenos">261</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">262</span><span class="w">    </span><span class="n">shapes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"></span>
<span class="linenos">263</span><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Shapes visualisation example</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"></span>
<span class="linenos">264</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">265</span><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">console</span><span class="o">::</span><span class="n">find_argument</span><span class="w"> </span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;-v&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"></span>
<span class="linenos">266</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">267</span><span class="w">    </span><span class="n">viewports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"></span>
<span class="linenos">268</span><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Viewports example</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"></span>
<span class="linenos">269</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">270</span><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">console</span><span class="o">::</span><span class="n">find_argument</span><span class="w"> </span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;-i&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"></span>
<span class="linenos">271</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">272</span><span class="w">    </span><span class="n">interaction_customization</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"></span>
<span class="linenos">273</span><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Interaction Customization example</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"></span>
<span class="linenos">274</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">275</span><span class="w">  </span><span class="k">else</span><span class="w"></span>
<span class="linenos">276</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">277</span><span class="w">    </span><span class="n">printUsage</span><span class="w"> </span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span><span class="w"></span>
<span class="linenos">278</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="linenos">279</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">280</span>
<span class="linenos">281</span><span class="w">  </span><span class="c1">// ------------------------------------</span>
<span class="linenos">282</span><span class="w">  </span><span class="c1">// -----Create example point cloud-----</span>
<span class="linenos">283</span><span class="w">  </span><span class="c1">// ------------------------------------</span>
<span class="linenos">284</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZ</span><span class="o">&gt;::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">basic_cloud_ptr</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZ</span><span class="o">&gt;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">285</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZRGB</span><span class="o">&gt;::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">point_cloud_ptr</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZRGB</span><span class="o">&gt;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">286</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Generating example point clouds.</span><span class="se">\n\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"></span>
<span class="linenos">287</span><span class="w">  </span><span class="c1">// We&#39;re going to make an ellipse extruded along the z-axis. The colour for</span>
<span class="linenos">288</span><span class="w">  </span><span class="c1">// the XYZRGB cloud will gradually go from red to green to blue.</span>
<span class="linenos">289</span><span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">r</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span><span class="w"> </span><span class="n">g</span><span class="p">(</span><span class="mi">15</span><span class="p">),</span><span class="w"> </span><span class="n">b</span><span class="p">(</span><span class="mi">15</span><span class="p">);</span><span class="w"></span>
<span class="linenos">290</span><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">float</span><span class="w"> </span><span class="n">z</span><span class="p">(</span><span class="mf">-1.0</span><span class="p">);</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mf">1.0</span><span class="p">;</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mf">0.05</span><span class="p">)</span><span class="w"></span>
<span class="linenos">291</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">292</span><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">float</span><span class="w"> </span><span class="n">angle</span><span class="p">(</span><span class="mf">0.0</span><span class="p">);</span><span class="w"> </span><span class="n">angle</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mf">360.0</span><span class="p">;</span><span class="w"> </span><span class="n">angle</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mf">5.0</span><span class="p">)</span><span class="w"></span>
<span class="linenos">293</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">294</span><span class="w">      </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZ</span><span class="w"> </span><span class="n">basic_point</span><span class="p">;</span><span class="w"></span>
<span class="linenos">295</span><span class="w">      </span><span class="n">basic_point</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.5</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cos</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">angle</span><span class="p">));</span><span class="w"></span>
<span class="linenos">296</span><span class="w">      </span><span class="n">basic_point</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sinf</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">angle</span><span class="p">));</span><span class="w"></span>
<span class="linenos">297</span><span class="w">      </span><span class="n">basic_point</span><span class="p">.</span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">z</span><span class="p">;</span><span class="w"></span>
<span class="linenos">298</span><span class="w">      </span><span class="n">basic_cloud_ptr</span><span class="o">-&gt;</span><span class="n">points</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">basic_point</span><span class="p">);</span><span class="w"></span>
<span class="linenos">299</span>
<span class="linenos">300</span><span class="w">      </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZRGB</span><span class="w"> </span><span class="n">point</span><span class="p">;</span><span class="w"></span>
<span class="linenos">301</span><span class="w">      </span><span class="n">point</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">basic_point</span><span class="p">.</span><span class="n">x</span><span class="p">;</span><span class="w"></span>
<span class="linenos">302</span><span class="w">      </span><span class="n">point</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">basic_point</span><span class="p">.</span><span class="n">y</span><span class="p">;</span><span class="w"></span>
<span class="linenos">303</span><span class="w">      </span><span class="n">point</span><span class="p">.</span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">basic_point</span><span class="p">.</span><span class="n">z</span><span class="p">;</span><span class="w"></span>
<span class="linenos">304</span><span class="w">      </span><span class="n">point</span><span class="p">.</span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">r</span><span class="p">;</span><span class="w"></span>
<span class="linenos">305</span><span class="w">      </span><span class="n">point</span><span class="p">.</span><span class="n">g</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g</span><span class="p">;</span><span class="w"></span>
<span class="linenos">306</span><span class="w">      </span><span class="n">point</span><span class="p">.</span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w"></span>
<span class="linenos">307</span><span class="w">      </span><span class="n">point_cloud_ptr</span><span class="o">-&gt;</span><span class="n">points</span><span class="p">.</span><span class="n">push_back</span><span class="w"> </span><span class="p">(</span><span class="n">point</span><span class="p">);</span><span class="w"></span>
<span class="linenos">308</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">309</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">z</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">0.0</span><span class="p">)</span><span class="w"></span>
<span class="linenos">310</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">311</span><span class="w">      </span><span class="n">r</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mi">12</span><span class="p">;</span><span class="w"></span>
<span class="linenos">312</span><span class="w">      </span><span class="n">g</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">12</span><span class="p">;</span><span class="w"></span>
<span class="linenos">313</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">314</span><span class="w">    </span><span class="k">else</span><span class="w"></span>
<span class="linenos">315</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">316</span><span class="w">      </span><span class="n">g</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mi">12</span><span class="p">;</span><span class="w"></span>
<span class="linenos">317</span><span class="w">      </span><span class="n">b</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">12</span><span class="p">;</span><span class="w"></span>
<span class="linenos">318</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">319</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">320</span><span class="w">  </span><span class="n">basic_cloud_ptr</span><span class="o">-&gt;</span><span class="n">width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">basic_cloud_ptr</span><span class="o">-&gt;</span><span class="n">size</span><span class="w"> </span><span class="p">();</span><span class="w"></span>
<span class="linenos">321</span><span class="w">  </span><span class="n">basic_cloud_ptr</span><span class="o">-&gt;</span><span class="n">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="linenos">322</span><span class="w">  </span><span class="n">point_cloud_ptr</span><span class="o">-&gt;</span><span class="n">width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">point_cloud_ptr</span><span class="o">-&gt;</span><span class="n">size</span><span class="w"> </span><span class="p">();</span><span class="w"></span>
<span class="linenos">323</span><span class="w">  </span><span class="n">point_cloud_ptr</span><span class="o">-&gt;</span><span class="n">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="linenos">324</span>
<span class="linenos">325</span><span class="w">  </span><span class="c1">// ----------------------------------------------------------------</span>
<span class="linenos">326</span><span class="w">  </span><span class="c1">// -----Calculate surface normals with a search radius of 0.05-----</span>
<span class="linenos">327</span><span class="w">  </span><span class="c1">// ----------------------------------------------------------------</span>
<span class="linenos">328</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">NormalEstimation</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZRGB</span><span class="p">,</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">Normal</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ne</span><span class="p">;</span><span class="w"></span>
<span class="linenos">329</span><span class="w">  </span><span class="n">ne</span><span class="p">.</span><span class="n">setInputCloud</span><span class="w"> </span><span class="p">(</span><span class="n">point_cloud_ptr</span><span class="p">);</span><span class="w"></span>
<span class="linenos">330</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">search</span><span class="o">::</span><span class="n">KdTree</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZRGB</span><span class="o">&gt;::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">tree</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">search</span><span class="o">::</span><span class="n">KdTree</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZRGB</span><span class="o">&gt;</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="linenos">331</span><span class="w">  </span><span class="n">ne</span><span class="p">.</span><span class="n">setSearchMethod</span><span class="w"> </span><span class="p">(</span><span class="n">tree</span><span class="p">);</span><span class="w"></span>
<span class="linenos">332</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">Normal</span><span class="o">&gt;::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">cloud_normals1</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">Normal</span><span class="o">&gt;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">333</span><span class="w">  </span><span class="n">ne</span><span class="p">.</span><span class="n">setRadiusSearch</span><span class="w"> </span><span class="p">(</span><span class="mf">0.05</span><span class="p">);</span><span class="w"></span>
<span class="linenos">334</span><span class="w">  </span><span class="n">ne</span><span class="p">.</span><span class="n">compute</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">cloud_normals1</span><span class="p">);</span><span class="w"></span>
<span class="linenos">335</span>
<span class="linenos">336</span><span class="w">  </span><span class="c1">// ---------------------------------------------------------------</span>
<span class="linenos">337</span><span class="w">  </span><span class="c1">// -----Calculate surface normals with a search radius of 0.1-----</span>
<span class="linenos">338</span><span class="w">  </span><span class="c1">// ---------------------------------------------------------------</span>
<span class="linenos">339</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">Normal</span><span class="o">&gt;::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">cloud_normals2</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">Normal</span><span class="o">&gt;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">340</span><span class="w">  </span><span class="n">ne</span><span class="p">.</span><span class="n">setRadiusSearch</span><span class="w"> </span><span class="p">(</span><span class="mf">0.1</span><span class="p">);</span><span class="w"></span>
<span class="linenos">341</span><span class="w">  </span><span class="n">ne</span><span class="p">.</span><span class="n">compute</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">cloud_normals2</span><span class="p">);</span><span class="w"></span>
<span class="linenos">342</span>
<span class="linenos">343</span><span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="o">::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">viewer</span><span class="p">;</span><span class="w"></span>
<span class="linenos">344</span><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">simple</span><span class="p">)</span><span class="w"></span>
<span class="linenos">345</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">346</span><span class="w">    </span><span class="n">viewer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">simpleVis</span><span class="p">(</span><span class="n">basic_cloud_ptr</span><span class="p">);</span><span class="w"></span>
<span class="linenos">347</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">348</span><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rgb</span><span class="p">)</span><span class="w"></span>
<span class="linenos">349</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">350</span><span class="w">    </span><span class="n">viewer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rgbVis</span><span class="p">(</span><span class="n">point_cloud_ptr</span><span class="p">);</span><span class="w"></span>
<span class="linenos">351</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">352</span><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">custom_c</span><span class="p">)</span><span class="w"></span>
<span class="linenos">353</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">354</span><span class="w">    </span><span class="n">viewer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">customColourVis</span><span class="p">(</span><span class="n">basic_cloud_ptr</span><span class="p">);</span><span class="w"></span>
<span class="linenos">355</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">356</span><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">normals</span><span class="p">)</span><span class="w"></span>
<span class="linenos">357</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">358</span><span class="w">    </span><span class="n">viewer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">normalsVis</span><span class="p">(</span><span class="n">point_cloud_ptr</span><span class="p">,</span><span class="w"> </span><span class="n">cloud_normals2</span><span class="p">);</span><span class="w"></span>
<span class="linenos">359</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">360</span><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">shapes</span><span class="p">)</span><span class="w"></span>
<span class="linenos">361</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">362</span><span class="w">    </span><span class="n">viewer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">shapesVis</span><span class="p">(</span><span class="n">point_cloud_ptr</span><span class="p">);</span><span class="w"></span>
<span class="linenos">363</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">364</span><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">viewports</span><span class="p">)</span><span class="w"></span>
<span class="linenos">365</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">366</span><span class="w">    </span><span class="n">viewer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">viewportsVis</span><span class="p">(</span><span class="n">point_cloud_ptr</span><span class="p">,</span><span class="w"> </span><span class="n">cloud_normals1</span><span class="p">,</span><span class="w"> </span><span class="n">cloud_normals2</span><span class="p">);</span><span class="w"></span>
<span class="linenos">367</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">368</span><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">interaction_customization</span><span class="p">)</span><span class="w"></span>
<span class="linenos">369</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">370</span><span class="w">    </span><span class="n">viewer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">interactionCustomizationVis</span><span class="p">();</span><span class="w"></span>
<span class="linenos">371</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">372</span>
<span class="linenos">373</span><span class="w">  </span><span class="c1">//--------------------</span>
<span class="linenos">374</span><span class="w">  </span><span class="c1">// -----Main loop-----</span>
<span class="linenos">375</span><span class="w">  </span><span class="c1">//--------------------</span>
<span class="linenos">376</span><span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">wasStopped</span><span class="w"> </span><span class="p">())</span><span class="w"></span>
<span class="linenos">377</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">378</span><span class="w">    </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">spinOnce</span><span class="w"> </span><span class="p">(</span><span class="mi">100</span><span class="p">);</span><span class="w"></span>
<span class="linenos">379</span><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">sleep_for</span><span class="p">(</span><span class="mi">100</span><span class="n">ms</span><span class="p">);</span><span class="w"></span>
<span class="linenos">380</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">381</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<section id="compiling-and-running-the-program">
<h2>Compiling and running the program</h2>
<p>Create a <cite>CMakeLists.txt</cite> file with the following contents:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span><span class="w"> </span><span class="s">3.5</span><span class="w"> </span><span class="s">FATAL_ERROR</span><span class="p">)</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="nb">project</span><span class="p">(</span><span class="s">pcl_visualizer_viewports</span><span class="p">)</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="nb">find_package</span><span class="p">(</span><span class="s">PCL</span><span class="w"> </span><span class="s">1.2</span><span class="w"> </span><span class="s">REQUIRED</span><span class="p">)</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="nb">include_directories</span><span class="p">(</span><span class="o">${</span><span class="nv">PCL_INCLUDE_DIRS</span><span class="o">}</span><span class="p">)</span>
<span class="linenos"> 8</span><span class="nb">link_directories</span><span class="p">(</span><span class="o">${</span><span class="nv">PCL_LIBRARY_DIRS</span><span class="o">}</span><span class="p">)</span>
<span class="linenos"> 9</span><span class="nb">add_definitions</span><span class="p">(</span><span class="o">${</span><span class="nv">PCL_DEFINITIONS</span><span class="o">}</span><span class="p">)</span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="nb">add_executable</span> <span class="p">(</span><span class="s">pcl_visualizer_demo</span><span class="w"> </span><span class="s">pcl_visualizer_demo.cpp</span><span class="p">)</span>
<span class="linenos">12</span><span class="nb">target_link_libraries</span> <span class="p">(</span><span class="s">pcl_visualizer_demo</span><span class="w"> </span><span class="o">${</span><span class="nv">PCL_LIBRARIES</span><span class="o">}</span><span class="p">)</span>
</pre></div>
</div>
<p>After you have made the executable, you can run it like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ./pcl_visualizer_demo -h
</pre></div>
</div>
<p>Change the option to change which demo is executed. See the help output
for details.</p>
<p>To exit the viewer application, press <code class="docutils literal notranslate"><span class="pre">q</span></code>. Press <code class="docutils literal notranslate"><span class="pre">r</span></code> to centre and
zoom the viewer so that the entire cloud is visible. Use the mouse to
rotate the viewpoint by clicking and dragging. You can use the scroll
wheel, or right-click and drag up and down, to zoom in and out.
Middle-clicking and dragging will move the camera.</p>
</section>
</section>
<section id="visualising-a-single-cloud">
<h1>Visualising a single cloud</h1>
<p>This sample uses PCLVisualizer to display a single PointXYZ cloud. It
also illustrates changing the background colour and displaying the axes.
The code is in the function <code class="docutils literal notranslate"><span class="pre">simpleVis</span></code>.</p>
<a class="reference internal image-reference" href="_images/pcl_visualizer_simple.png"><img alt="_images/pcl_visualizer_simple.png" src="_images/pcl_visualizer_simple.png" style="width: 838px;" /></a>
<section id="explanation">
<h2>Explanation</h2>
<p>The <code class="docutils literal notranslate"><span class="pre">simpleVis</span></code> function shows how to perform the most basic
visualisation of a point cloud. Letâ€™s take a look at the function,
line-by-line.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="o">::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">viewer</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;3D Viewer&quot;</span><span class="p">));</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
</pre></div>
</div>
<p>This creates the viewer object, giving it a nice name to display in the
title bar. We are storing it in a smart pointer only so it can be
passed around the demo program. Usually, you do not need to do this.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="n">viewer</span><span class="o">-&gt;</span><span class="n">setBackgroundColor</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
</pre></div>
</div>
<p>The background colour of the viewer can be set to any RGB colour you
like. In this case, we are setting it to black.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addPointCloud</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZ</span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">cloud</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sample cloud&quot;</span><span class="p">);</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
</pre></div>
</div>
<p>This is the most important line. We add the point cloud to the viewer,
giving it an ID string that can be used to identify the cloud in other
methods. Multiple point clouds can be added with multiple calls to
<code class="docutils literal notranslate"><span class="pre">addPointCloud()</span></code>, supplying a new ID each time. If you want to update
a point cloud that is already displayed, you must first call
<code class="docutils literal notranslate"><span class="pre">removePointCloud()</span></code> and provide the ID of the cloud that is to be
updated. (Note: versions 1.1 and up of PCL provide a new API method,
<code class="docutils literal notranslate"><span class="pre">updatePointCloud()</span></code>, that allows a cloud to be updated without
manually calling <code class="docutils literal notranslate"><span class="pre">removePointCloud()</span></code> first.)</p>
<p>This is the most basic of <code class="docutils literal notranslate"><span class="pre">addPointCloud()</span></code>â€™s many
variations. Others are used to handle different point types, display
normals, and so on. We will illustrate some others during this tutorial,
or you can see the <a class="reference external" href="http://docs.pointclouds.org/1.0.0/classpcl_1_1visualization_1_1_p_c_l_visualizer.html">PCLVisualizer documentation</a> for more details.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="n">viewer</span><span class="o">-&gt;</span><span class="n">setPointCloudRenderingProperties</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCL_VISUALIZER_POINT_SIZE</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sample cloud&quot;</span><span class="p">);</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
</pre></div>
</div>
<p>This next line changes the size of the rendered points. You can control
the way any point cloud is rendered in the viewer using this method.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addCoordinateSystem</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="p">);</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
</pre></div>
</div>
<p>Viewing complex point clouds can often be disorientating. To keep
yourself aligned in the world, axes can be displayed. These will appear
as three cylinders along the X (red), Y (green) and Z (blue) axes. The
size of the cylinders can be controlled using the <code class="docutils literal notranslate"><span class="pre">scale</span></code> parameter.
In this case, we have set it to 1.0 (which also happens to be the
default if no value is given). An alternative version of this method can
be used to place the axes at any point in the world.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="n">viewer</span><span class="o">-&gt;</span><span class="n">initCameraParameters</span><span class="w"> </span><span class="p">();</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
</pre></div>
</div>
<p>This final call sets up some handy camera parameters to make things look
nice.</p>
<p>There is one final piece of code relevant to all the samples. It can be
found at the bottom of the sample:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">wasStopped</span><span class="w"> </span><span class="p">())</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">spinOnce</span><span class="w"> </span><span class="p">(</span><span class="mi">100</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">sleep_for</span><span class="p">(</span><span class="mi">100</span><span class="n">ms</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
</pre></div>
</div>
<p>These lines are running an event loop. Each call to <code class="docutils literal notranslate"><span class="pre">spinOnce</span></code> gives
the viewer time to process events, allowing it to be interactive. There
is also a <code class="docutils literal notranslate"><span class="pre">spin</span></code> method, which only needs to be called once.</p>
</section>
</section>
<section id="adding-some-colour">
<h1>Adding some colour</h1>
<p>Often, a point cloud will not use the simple PointXYZ type. One common
point type is PointXYZRGB, which also contains colour data. Aside from
that, you may wish to colour specific point clouds to make them
distinguishable in the viewer. PCLVizualizer provides facilities for
displaying point clouds with the colour data stored within them, or for
assigning colours to point clouds.</p>
<section id="rgb-point-clouds">
<h2>RGB point clouds</h2>
<p>Many devices, such as the Microsoft Kinect, produce point clouds with
RGB data. PCLVisualizer can display the cloud using this data to colour
each point. The code in the <code class="docutils literal notranslate"><span class="pre">rgbVis</span></code> function shows how to do this.</p>
<a class="reference internal image-reference" href="_images/pcl_visualizer_color_rgb.png"><img alt="_images/pcl_visualizer_color_rgb.png" src="_images/pcl_visualizer_color_rgb.png" style="width: 838px;" /></a>
</section>
<section id="id1">
<h2>Explanation</h2>
<p>Not much of the code in this sample has changed from the earlier sample.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="o">::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">rgbVis</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZRGB</span><span class="o">&gt;::</span><span class="n">ConstPtr</span><span class="w"> </span><span class="n">cloud</span><span class="p">)</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
</pre></div>
</div>
<p>First, notice that the point type has changed from the simple example.
We now use a point type that also provides room for RGB data. This is
important; without the RGB fields in the point (the point type does not
necessarily have to be <code class="docutils literal notranslate"><span class="pre">PointXYZRGB</span></code>, as long as it has the three
colour fields), PCLVisualizer would not know what colours to use.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PointCloudColorHandlerRGB</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZRGB</span><span class="o">&gt;</span><span class="w"> </span><span class="n">rgb</span><span class="p">(</span><span class="n">point_cloud_ptr</span><span class="p">);</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
</pre></div>
</div>
<p>Next, after setting the viewerâ€™s background colour, we create a colour
handler object. PCLVisualizer uses objects like this to display custom
data. In this case, the object will get the RGB colour fields from each
point for the viewer to use when drawing them. Many other handlers exist
for a wide range of purposes. We will see another of the colour handlers
in the next code sample, but handlers also exist for such purposes as
drawing any other field as the colour and drawing geometry from point
clouds. See the <a class="reference external" href="http://docs.pointclouds.org/1.0.0/group__visualization.html">documentation</a> for details.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addPointCloud</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZRGB</span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">cloud</span><span class="p">,</span><span class="w"> </span><span class="n">rgb</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sample cloud&quot;</span><span class="p">);</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
</pre></div>
</div>
<p>Finally, when we add the point cloud, we specify the colour handler when
we add the point cloud to the viewer.</p>
</section>
<section id="custom-colours">
<h2>Custom colours</h2>
<p>The second code sample demonstrates giving a point cloud a single
colour. We can use this technique to give specific point clouds their
own colours, allowing us to distinguish individual point clouds. In this
sample, given in the <code class="docutils literal notranslate"><span class="pre">customColourVis</span></code> function, we have set the point
cloudâ€™s colour to green. (We have also increased the size of the points
to make the colour more visible.)</p>
<a class="reference internal image-reference" href="_images/pcl_visualizer_color_custom.png"><img alt="_images/pcl_visualizer_color_custom.png" src="_images/pcl_visualizer_color_custom.png" style="width: 838px;" /></a>
</section>
<section id="id2">
<h2>Explanation</h2>
<p>Again, not much of the code in this sample has changed from the earlier
sample.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="o">::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">customColourVis</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZ</span><span class="o">&gt;::</span><span class="n">ConstPtr</span><span class="w"> </span><span class="n">cloud</span><span class="p">)</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
</pre></div>
</div>
<p>The point type in use this time is back to PointXYZ again. When setting
a custom colour handler for a point cloud, it doesnâ€™t matter what the
underlying data type is. None of the point fields are used for the
colour with the custom colour handler.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PointCloudColorHandlerCustom</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZ</span><span class="o">&gt;</span><span class="w"> </span><span class="n">single_color</span><span class="w"> </span><span class="p">(</span><span class="n">cloud</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">255</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
</pre></div>
</div>
<p>We create a custom colour handler and assign it a nice, bright shade of
green.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addPointCloud</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZ</span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">cloud</span><span class="p">,</span><span class="w"> </span><span class="n">single_color</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sample cloud&quot;</span><span class="p">);</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
</pre></div>
</div>
<p>As with the previous example, we pass the colour handler in when we call
<code class="docutils literal notranslate"><span class="pre">addPointCloud&lt;&gt;()</span></code>.</p>
</section>
</section>
<section id="normals-and-other-information">
<h1>Normals and other information</h1>
<p>Displaying normals is an important step in understanding a point cloud.
The PCLVisualizer class has the ability to draw normals, as well as
other interesting point cloud information, such as principal curvatures
and geometries.</p>
<p>The code sample in the <code class="docutils literal notranslate"><span class="pre">normalsVis</span></code> function shows how to display the
normals of a point cloud. The code for calculating the normals will not
be explained in this tutorial. See the normals calculation tutorial for
details.</p>
<a class="reference internal image-reference" href="_images/pcl_visualizer_normals.png"><img alt="_images/pcl_visualizer_normals.png" src="_images/pcl_visualizer_normals.png" style="width: 838px;" /></a>
<section id="id3">
<h2>Explanation</h2>
<p>The relevant line of code is placed after the line to draw the point
cloud.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addPointCloudNormals</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZRGB</span><span class="p">,</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">Normal</span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">cloud</span><span class="p">,</span><span class="w"> </span><span class="n">normals</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mf">0.05</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;normals&quot;</span><span class="p">);</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
</pre></div>
</div>
<p>Once you have your normals, one extra line is all it takes to display
them in the viewer. The parameters to this method set the number of
normals to display (here, every tenth normal is displayed) and the
length of the line to draw for each normal (0.05, in this case).</p>
</section>
</section>
<section id="drawing-shapes">
<h1>Drawing Shapes</h1>
<p>PCLVisualizer allows you to draw various primitive shapes in the view.
This is often used to visualise the results of point cloud processing
algorithms, for example, visualising which clusters of points have been
recognised as landmarks by drawing transparent spheres around them.</p>
<p>The sample code in the <code class="docutils literal notranslate"><span class="pre">shapesVis</span></code> function illustrates some of the
methods used to add shapes to a viewer. It adds four shapes:</p>
<ul class="simple">
<li><p>A line from the first point in the cloud to the last point in the
cloud.</p></li>
<li><p>A plane at the origin.</p></li>
<li><p>A sphere centred on the first point in the cloud.</p></li>
<li><p>A cone along the Y-axis.</p></li>
</ul>
<a class="reference internal image-reference" href="_images/pcl_visualizer_shapes.png"><img alt="_images/pcl_visualizer_shapes.png" src="_images/pcl_visualizer_shapes.png" style="width: 838px;" /></a>
<section id="id4">
<h2>Explanation</h2>
<p>The relevant parts of the code sample for drawing shapes begin after the
point cloud is added to the viewer.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addLine</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZRGB</span><span class="o">&gt;</span><span class="w"> </span><span class="p">((</span><span class="o">*</span><span class="n">cloud</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">cloud</span><span class="p">)[</span><span class="n">cloud</span><span class="o">-&gt;</span><span class="n">size</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">],</span><span class="w"> </span><span class="s">&quot;line&quot;</span><span class="p">);</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
</pre></div>
</div>
<p>This line (of code) adds a line (in space) from the first point in the
cloud to the last point. This method is useful, for example, for showing
correspondences between point clouds. In this case, the line is using
the default colour, but you can also specify the colour of the line.
Drawing shapes at points from a point cloud is very common, and various
shapes are available.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addSphere</span><span class="w"> </span><span class="p">((</span><span class="o">*</span><span class="n">cloud</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="mf">0.2</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sphere&quot;</span><span class="p">);</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
</pre></div>
</div>
<p>This next line adds a sphere centred on the first point in the cloud
with a radius of 0.2. It also gives the sphere a colour.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="n">pcl</span><span class="o">::</span><span class="n">ModelCoefficients</span><span class="w"> </span><span class="n">coeffs</span><span class="p">;</span><span class="w"></span>
<span class="n">coeffs</span><span class="p">.</span><span class="n">values</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="mf">0.0</span><span class="p">);</span><span class="w"></span>
<span class="n">coeffs</span><span class="p">.</span><span class="n">values</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="mf">0.0</span><span class="p">);</span><span class="w"></span>
<span class="n">coeffs</span><span class="p">.</span><span class="n">values</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="mf">1.0</span><span class="p">);</span><span class="w"></span>
<span class="n">coeffs</span><span class="p">.</span><span class="n">values</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="mf">0.0</span><span class="p">);</span><span class="w"></span>
<span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addPlane</span><span class="w"> </span><span class="p">(</span><span class="n">coeffs</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;plane&quot;</span><span class="p">);</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
</pre></div>
</div>
<p>Next, we add a plane to the drawing. In this case, we are specifying the
plane using the standard plane equation (ax + by + cz + d = 0). Our
plane will be centered at the origin and oriented along the Z-axis. Many
of the shape drawing functions take coefficients in this way.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="n">coeffs</span><span class="p">.</span><span class="n">values</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span><span class="w"></span>
<span class="n">coeffs</span><span class="p">.</span><span class="n">values</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="mf">0.3</span><span class="p">);</span><span class="w"></span>
<span class="n">coeffs</span><span class="p">.</span><span class="n">values</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="mf">0.3</span><span class="p">);</span><span class="w"></span>
<span class="n">coeffs</span><span class="p">.</span><span class="n">values</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="mf">0.0</span><span class="p">);</span><span class="w"></span>
<span class="n">coeffs</span><span class="p">.</span><span class="n">values</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="mf">0.0</span><span class="p">);</span><span class="w"></span>
<span class="n">coeffs</span><span class="p">.</span><span class="n">values</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="mf">1.0</span><span class="p">);</span><span class="w"></span>
<span class="n">coeffs</span><span class="p">.</span><span class="n">values</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="mf">0.0</span><span class="p">);</span><span class="w"></span>
<span class="n">coeffs</span><span class="p">.</span><span class="n">values</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="mf">5.0</span><span class="p">);</span><span class="w"></span>
<span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addCone</span><span class="w"> </span><span class="p">(</span><span class="n">coeffs</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;cone&quot;</span><span class="p">);</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
</pre></div>
</div>
<p>Finally, we add a cone. We are again using model coefficients to specify
the coneâ€™s parameters.</p>
</section>
</section>
<section id="multiple-viewports">
<h1>Multiple viewports</h1>
<p>You will often want to compare multiple point clouds side-by-side. While
you could draw them in the same view port, this can get confusing.
PCLVisualizer allows you to draw multiple point clouds in separate
viewports, making comparison easy.</p>
<p>The code in the <code class="docutils literal notranslate"><span class="pre">viewportsVis</span></code> function uses viewports to demonstrate
comparing the normals calculated for a point cloud. Two sets of normals
are calculated for the same cloud but using a different search radius.
The first time, the search radius is 0.05. The second time, it is 0.1.
The normals for the 0.05 radius search are displayed in the viewport
with the black background. The normals for the 0.1 radius search are
displayed in the viewport with the grey background.</p>
<p>Comparing the two sets of normals side-by-side makes it immediately
obvious what the effects of the different algorithm parameter are. In
this way, you can experiment with the parameters for algorithms to find
good settings, quickly viewing the results.</p>
<a class="reference internal image-reference" href="_images/pcl_visualizer_viewports.png"><img alt="_images/pcl_visualizer_viewports.png" src="_images/pcl_visualizer_viewports.png" style="width: 838px;" /></a>
<section id="id5">
<h2>Explanation</h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="o">::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">viewer</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;3D Viewer&quot;</span><span class="p">));</span><span class="w"></span>
<span class="n">viewer</span><span class="o">-&gt;</span><span class="n">initCameraParameters</span><span class="w"> </span><span class="p">();</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
</pre></div>
</div>
<p>This is our standard code for creating a viewer.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="kt">int</span><span class="w"> </span><span class="n">v1</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="n">viewer</span><span class="o">-&gt;</span><span class="n">createViewPort</span><span class="w"> </span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="n">v1</span><span class="p">);</span><span class="w"></span>
<span class="n">viewer</span><span class="o">-&gt;</span><span class="n">setBackgroundColor</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">v1</span><span class="p">);</span><span class="w"></span>
<span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addText</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;Radius: 0.01&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;v1 text&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">v1</span><span class="p">);</span><span class="w"></span>
<span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PointCloudColorHandlerRGBField</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZRGB</span><span class="o">&gt;</span><span class="w"> </span><span class="n">rgb</span><span class="w"> </span><span class="p">(</span><span class="n">cloud</span><span class="p">);</span><span class="w"></span>
<span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addPointCloud</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZRGB</span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">cloud</span><span class="p">,</span><span class="w"> </span><span class="n">rgb</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sample cloud1&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">v1</span><span class="p">);</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
</pre></div>
</div>
<p>The next step is to create a new viewport. The four parameters are the
minimum and maximum ranges of the viewport on the X- and Y-axes, between
0 and 1. We are creating a viewport that will fill the left half of the
window. We must store the view port ID number that is passed back in the
fifth parameter and use it in all other calls where we only want to
affect that viewport.</p>
<p>We also set the background colour of this viewport, give it a label
based on what we are using the viewport to distinguish, and add our
point cloud to it, using an RGB colour handler.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="kt">int</span><span class="w"> </span><span class="n">v2</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="n">viewer</span><span class="o">-&gt;</span><span class="n">createViewPort</span><span class="w"> </span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="p">);</span><span class="w"></span>
<span class="n">viewer</span><span class="o">-&gt;</span><span class="n">setBackgroundColor</span><span class="w"> </span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="p">);</span><span class="w"></span>
<span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addText</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;Radius: 0.1&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;v2 text&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="p">);</span><span class="w"></span>
<span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PointCloudColorHandlerCustom</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZRGB</span><span class="o">&gt;</span><span class="w"> </span><span class="n">single_color</span><span class="w"> </span><span class="p">(</span><span class="n">cloud</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">255</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addPointCloud</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZRGB</span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">cloud</span><span class="p">,</span><span class="w"> </span><span class="n">single_color</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sample cloud2&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="p">);</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
</pre></div>
</div>
<p>Then we do the same thing again for the second viewport, making it take
up the right half of the window. We make this viewport a shade of grey
so it is easily distinguishable in the demonstration program. We add the
same point cloud, but this time we give it a custom colour handler.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="n">viewer</span><span class="o">-&gt;</span><span class="n">setPointCloudRenderingProperties</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCL_VISUALIZER_POINT_SIZE</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sample cloud1&quot;</span><span class="p">);</span><span class="w"></span>
<span class="n">viewer</span><span class="o">-&gt;</span><span class="n">setPointCloudRenderingProperties</span><span class="w"> </span><span class="p">(</span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCL_VISUALIZER_POINT_SIZE</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sample cloud2&quot;</span><span class="p">);</span><span class="w"></span>
<span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addCoordinateSystem</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="p">);</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
</pre></div>
</div>
<p>These three lines set some properties globally for all viewports. Most of
the PCLVisualizer methods accept an optional viewport ID parameter. When
it is specified, they affect only that viewport. When it is not, as in
this case, they affect all viewports.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addPointCloudNormals</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZRGB</span><span class="p">,</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">Normal</span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">cloud</span><span class="p">,</span><span class="w"> </span><span class="n">normals1</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mf">0.05</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;normals1&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">v1</span><span class="p">);</span><span class="w"></span>
<span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addPointCloudNormals</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">PointXYZRGB</span><span class="p">,</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">Normal</span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">cloud</span><span class="p">,</span><span class="w"> </span><span class="n">normals2</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mf">0.05</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;normals2&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="p">);</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
</pre></div>
</div>
<p>Finally, we add the normals, one to each viewport.</p>
</section>
</section>
<section id="interaction-customization">
<h1>Interaction Customization</h1>
<p>You will sometimes feel that the interactivity options offered by the default
mouse and key bindings do not satisfy your needs and you may want to extend
functionality with features such as the possibility of saving the currently
shown point clouds when pressing a button or annotating certain locations on the
rendering window with your mouse etc. A very simple example of such things
is found in the <code class="docutils literal notranslate"><span class="pre">interactionCustomizationVis</span></code> method.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In Mac platforms and if using a VTK version prior to 7.0, the executable is required to be built as an Application Bundle, in order to have proper mouse and keyboard interaction support. For more instructions on how to do that, please consult the <a class="reference external" href="http://www.vtk.org/Wiki/Cocoa_VTK#Use_Application_Bundles">Cocoa VTK Wiki</a>.</p>
</div>
<p>In this part of the tutorial you will be shown how to catch mouse and keyboard
events. By right clicking on the window, a 2D text will appear and you can
erase all the text instances by pressing â€˜râ€™. The result should look something
like this:</p>
<a class="reference internal image-reference" href="_images/pcl_visualizer_interaction_customization.png"><img alt="_images/pcl_visualizer_interaction_customization.png" src="_images/pcl_visualizer_interaction_customization.png" style="width: 838px;" /></a>
<section id="id6">
<h2>Explanation</h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="o">::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">viewer</span><span class="w"> </span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;3D Viewer&quot;</span><span class="p">));</span><span class="w"></span>
<span class="n">viewer</span><span class="o">-&gt;</span><span class="n">initCameraParameters</span><span class="w"> </span><span class="p">();</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
</pre></div>
</div>
<p>This is the standard code for instantiating a viewer.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="n">viewer</span><span class="o">-&gt;</span><span class="n">registerKeyboardCallback</span><span class="w"> </span><span class="p">(</span><span class="n">keyboardEventOccurred</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">viewer</span><span class="p">);</span><span class="w"></span>
<span class="n">viewer</span><span class="o">-&gt;</span><span class="n">registerMouseCallback</span><span class="w"> </span><span class="p">(</span><span class="n">mouseEventOccurred</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">viewer</span><span class="p">);</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
</pre></div>
</div>
<p>These two lines of code will register the two methods, <code class="docutils literal notranslate"><span class="pre">keyboardEventOccurred</span></code>
and <code class="docutils literal notranslate"><span class="pre">mouseEventOccurred</span></code> to the keyboard and mouse event callback, respectively.
The second arguments for the two method calls are the so-called cookies. These
are any parameters you might want to pass to the callback function. In our case,
we want to pass the viewer itself, in order to do modifications on it in case
of user interaction. Note that these arguments must be in the form of a single
<code class="docutils literal notranslate"><span class="pre">void*</span></code> instance, so we need to cast the pointer to our smart pointer to <code class="docutils literal notranslate"><span class="pre">void*</span></code>.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="kt">void</span><span class="w"> </span><span class="n">mouseEventOccurred</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">MouseEvent</span><span class="w"> </span><span class="o">&amp;</span><span class="n">event</span><span class="p">,</span><span class="w"></span>
<span class="w">                     </span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">viewer_void</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="o">::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">viewer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="o">::</span><span class="n">Ptr</span><span class="w"> </span><span class="o">*&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">viewer_void</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="n">getButton</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">MouseEvent</span><span class="o">::</span><span class="n">LeftButton</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">event</span><span class="p">.</span><span class="n">getType</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">MouseEvent</span><span class="o">::</span><span class="n">MouseButtonRelease</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Left mouse button released at position (&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">event</span><span class="p">.</span><span class="n">getX</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;, &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">event</span><span class="p">.</span><span class="n">getY</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;)&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">str</span><span class="p">[</span><span class="mi">512</span><span class="p">];</span><span class="w"></span>

<span class="w">    </span><span class="n">sprintf</span><span class="w"> </span><span class="p">(</span><span class="n">str</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;text#%03d&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">text_id</span><span class="w"> </span><span class="o">++</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">addText</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;clicked here&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">event</span><span class="p">.</span><span class="n">getX</span><span class="w"> </span><span class="p">(),</span><span class="w"> </span><span class="n">event</span><span class="p">.</span><span class="n">getY</span><span class="w"> </span><span class="p">(),</span><span class="w"> </span><span class="n">str</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
</pre></div>
</div>
<p>This is the method that handles the mouse events. Every time any kind of mouse
event is registered, this function will be called. In order to see exactly what
that event is, we need to extract that information from the <code class="docutils literal notranslate"><span class="pre">event</span></code> instance.
In our case, we are looking for left mouse button releases. Whenever such an event
happens, we shall write a small text at the position of the mouse click.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="kt">void</span><span class="w"> </span><span class="n">keyboardEventOccurred</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">KeyboardEvent</span><span class="w"> </span><span class="o">&amp;</span><span class="n">event</span><span class="p">,</span><span class="w"></span>
<span class="w">                        </span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">viewer_void</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="o">::</span><span class="n">Ptr</span><span class="w"> </span><span class="n">viewer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">pcl</span><span class="o">::</span><span class="n">visualization</span><span class="o">::</span><span class="n">PCLVisualizer</span><span class="o">::</span><span class="n">Ptr</span><span class="w"> </span><span class="o">*&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">viewer_void</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="n">getKeySym</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;r&quot;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">event</span><span class="p">.</span><span class="n">keyDown</span><span class="w"> </span><span class="p">())</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;r was pressed =&gt; removing all text&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">str</span><span class="p">[</span><span class="mi">512</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">text_id</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="n">sprintf</span><span class="w"> </span><span class="p">(</span><span class="n">str</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;text#%03d&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="n">viewer</span><span class="o">-&gt;</span><span class="n">removeShape</span><span class="w"> </span><span class="p">(</span><span class="n">str</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="n">text_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
</pre></div>
</div>
<p>The same approach applies for the keyboard events. We check what key was pressed
and the action we do is to remove all the text created by our mouse clicks.
Please note that when â€˜râ€™ is pressed, the 3D camera still resets, as per
the original binding of â€˜râ€™ inside PCLVisualizer. So, our keyboard events do not
overwrite the functionality of the base class.</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright .</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>